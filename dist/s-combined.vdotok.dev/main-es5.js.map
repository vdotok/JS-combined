{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/chat/add-group/add-group.component.ts","webpack:///src/app/components/chat/add-group/add-group.component.html","webpack:///src/app/components/chat/chat.component.ts","webpack:///src/app/components/chat/chat.component.html","webpack:///src/app/components/chat/new-chat/new-chat.component.ts","webpack:///src/app/components/chat/new-chat/new-chat.component.html","webpack:///src/app/components/login/login.component.ts","webpack:///src/app/components/login/login.component.html","webpack:///src/app/components/sign-up/sign-up.component.ts","webpack:///src/app/components/sign-up/sign-up.component.html","webpack:///src/app/shared/FormsHandler/FormsHandler.ts","webpack:///src/app/shared/FormsHandler/get-errors.component.ts","webpack:///src/app/shared/app-material/app-material.module.ts","webpack:///src/app/shared/auth/auth-guard.service.ts","webpack:///src/app/shared/auth/auth.service.ts","webpack:///src/app/shared/helpers/helpersFunctions.ts","webpack:///src/app/shared/pipe/filter.ts","webpack:///src/app/shared/pipe/formatTime.ts","webpack:///src/app/shared/pipe/safeurl.ts","webpack:///src/app/shared/services/base.service.ts","webpack:///src/app/shared/services/http.service.ts","webpack:///src/app/shared/services/pubsub.service.ts","webpack:///src/app/shared/services/storage.service.ts","webpack:///src/app/shared/services/vdk-m2m-call.service.ts","webpack:///src/app/shared/services/vdk-one2one-call.service.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/validators.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","canActivate","redirectTo","AppRoutingModule","forRoot","imports","AppComponent","selector","template","AppModule","maxOpened","preventDuplicates","declarations","providers","bootstrap","AddGroupComponent","pubsubService","svc","toastr","_fb","changeDetector","currentUserName","getAuthUsername","currentUserData","getUserData","changeEvent","loading","addGroupModel","AllUsers","activeChat","chatHistory","message","group_title","groupnameError","selectedUsers","CopyAllUsers","setActiveChat","form","group","required","maxLength","updateOn","document","addEventListener","event","addGroup","searchInput","nativeElement","pipe","target","value","data","sorting","search_field","search_value","condition","post","res","users","length","temparaay","filteruser","filter","user","searchValue","toLowerCase","full_name","startsWith","returnData","subscribe","error","setAlreadySelected","map","userIndex","find","alluser","user_id","detectChanges","contact","push","selected","Set","console","content","useridArray","participants","auto_created","v","status","emit","reset","validateForm","log","invalid","success","closemodel","forEach","element","backScreen","openDialog","templateUrl","styleUrls","ChatComponent","vdkOne2OneCallSVC","vdkM2MCallSVC","router","elRef","dialog","ongoingCall","editGroupModel","AllGroups","threadType","fileToSend","isActiveThread","popupimagesrc","screen","sdkconnected","setToActive","callTime","groupOutgoingVideoCall","calling","participant","call_type","templateName","callerName","from","session","settings","isOnInProgressCamara","isOnInProgressMicrophone","groupForm","initConfigure","templateList","noCall","incommingAudioCall","outgoingAudioCall","AudioCallInProgress","incommingVideoCall","outgoingVideoCall","VideoCallInProgress","groupIncommingAudioCall","groupOutgoingAudioCall","groupOngoingAudioCall","groupIncommingVideoCall","groupVideoCall","Client","on","response","getAllGroups","type","rejectCall","findUserName","resetCall","to","startWatch","displaystyle","video_status","callerHolderstyle","getElementById","style","display","addParticipant","removeParticipant","sendTextMessage","getUsers","setOfflineStatus","setOnlineStatus","JSON","parse","stringify","trace","scroll","chatthread","findChatThread","messageBy","Date","pushMessage","readSingleMessage","setTimeout","sort","a","b","setUserTyping","receiptType","chName","topic","undefined","messageId","setOnlineStatusforSubscribe","messageInputElement","sendMessage","size","isGroupMessage","getTime","toString","key","channel_key","channel_name","date","playload","group_id","alert","get","groups","chat","r","chatTitle","indexchat","subscribeToChat","sortThread","preview","includes","split","channel","readsendMessage","el","removeAttribute","clicked_item","startone2oneAudioCall","startOne2OneVideoCall","chatobj","unreadchatHistory","isRead","readMessage","files","item","fileR","filetype","test","invalidSize","option","getFileType","toBase64","file","reject","reader","FileReader","readAsDataURL","onload","result","onerror","base64","SendFile","$event","onlineNumbers","who","n","username","ref_id","typinguser","nameList","userObj","join","i","j","querySelector","scrollTop","scrollHeight","Disconnect","clearLocalStorge","navigate","isShowName","messageByObj","previourmessage","thread","newResponse","foundIndex","findIndex","x","isactivethread","unReadCount","lastMessage","imagesrc","isMobile","window","innerWidth","countDownTime","unsubscribe","endCall","leaveGroupCall","startM2MVideoCall","inCall","participantsList","g","params","localVideo","remoteVideo","Call","p","getChatParticipants","groupCall","acceptOne2oneCall","acceptM2MCall","acceptCall","isM2MProgressCall","joinGroupCall","startm2mAudioCall","calleName","audioCall","filed","changeOne2OneSettings","changeM2MSettings","setCameraOn","setCameraOff","setMicUnmute","setMicMute","enabled","audiotrack","audioTracks","displayNamestyle","ishide","one2onetemplateList","setParticipantVideo","textmsg","index","splice","logout","returntoCall","handleFileInput","NewChatComponent","val","subscribedata","addGroupEvent","LoginComponent","auth","formError","islogin","buildForm","onLogin","loginForm","minLength","saveData","project_id","login","setUserData","setAuthToken","auth_token","setAuthUsername","SignUpComponent","usernameValidator","navigator","platform","emailValidator","signup","FormsHandler","valid","controls","field","control","markAsTouched","onlySelf","groupFiled","trim","GetErrorsComponent","errors","dirty","touched","Object","getMessage","errorMessages","requiredLength","requiredPattern","globalRippleConfig","disabled","AppMaterialModule","provide","useValue","entryComponents","AuthGuard","authService","isAuthenticated","AuthService","http","userSubject$","userSubject","getAuthToken","getToken","currentUserId","userRequest","userdata","_id","isEmptyObj","obj","hasOwnProperty","isEmptyArray","array","Array","isArray","isEmail","email","emailLowercase","match","FindObjectByValue","inputArray","FindArrayObject","AutoUnsubscribe","constructor","original","prototype","ngOnDestroy","prop","property","apply","arguments","filterPipe","items","name","FormatTimePipe","minutes","Math","floor","slice","SafeUrlPipe","domSanitizer","url","bypassSecurityTrustResourceUrl","BaseService","userData","userData$","asObservable","isLoading","isLoadingResponse","URL","payload","HttpService","baseUrl","apiBaseUrl","next","getModifiedReq","handle","body","serRes","showErrorMsg","errorRes","clone","formdata","headers","set","errorResponse","PubsubService","wsSubscription","MVDOTOK","projectID","secret","host","messaging_server_map","protocol","port","Register","authorization_token","SendMessage","chanelObj","Subscribe","UnSubscribe","chatMessages","SendReceipt","StorageService","localStorage","clear","sessionStorage","getItem","STORAGE_KEY_AUTH_TOKEN","token","setItem","removeItem","STORAGE_KEY_USER_NAME","STORAGE_KEY_USER_DATA","VdkM2MCallService","CVDOTOK","ManyToMany","GroupCall","JoinGroupCall","LeaveGroupCall","SetCameraOn","SetCameraOff","SetMicMute","SetMicUnmute","vidio","SetParticipantVideo","VdkOne2OneCallService","media_server_map","end_point","AudioCall","local","remote","AcceptCall","RejectCall","EndCall","CancelCall","components","SharedModule","hasBackdrop","useClass","multi","ValidationService","amount","validate","pattern","stripped","replace","isEmptyInputValue","tempstring","removeSpace","validEmail","validPhone","validUsername","uppercaseCharacterRule","crud","root","passworMismatch","parseFloat","parseInt","isNaN","whiteSpaceValidator","environment","production","bootstrapModule","err"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { SignUpComponent } from './components/sign-up/sign-up.component';\r\nimport { AuthGuard } from './shared/auth/auth-guard.service';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: 'login',\r\n    component: LoginComponent\r\n  },\r\n  {\r\n    path: 'signup',\r\n    component: SignUpComponent\r\n  },\r\n  {\r\n    path: 'chat',\r\n    component: ChatComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  { path: '**', redirectTo: 'login' },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  template: `<router-outlet></router-outlet>`\r\n})\r\nexport class AppComponent {\r\n  constructor() { }\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { ChatComponent } from './components/chat/chat.component';\r\nimport { LoginComponent } from './components/login/login.component';\r\nimport { SignUpComponent } from './components/sign-up/sign-up.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { AppMaterialModule } from './shared/app-material/app-material.module';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { SharedModule } from './shared/shared.module';\r\nimport { AddGroupComponent } from './components/chat/add-group/add-group.component';\r\nimport { NewChatComponent } from './components/chat/new-chat/new-chat.component';\r\nimport { ToastrModule } from 'ngx-toastr';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    ChatComponent,\r\n    AddGroupComponent,\r\n    LoginComponent,\r\n    NewChatComponent,\r\n    SignUpComponent\r\n  ],\r\n  imports: [\r\n    SharedModule,\r\n    ReactiveFormsModule,\r\n    BrowserModule,\r\n    AppRoutingModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    CommonModule,\r\n    BrowserAnimationsModule,\r\n    AppMaterialModule,\r\n    HttpClientModule,\r\n    ToastrModule.forRoot({\r\n      maxOpened: 1,\r\n      preventDuplicates: true\r\n    })\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { ChangeDetectorRef, Component, ElementRef, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport FormsHandler from 'src/app/shared/FormsHandler/FormsHandler';\r\nimport { BaseService } from 'src/app/shared/services/base.service';\r\nimport { PubsubService } from 'src/app/shared/services/pubsub.service';\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { fromEvent } from 'rxjs/internal/observable/fromEvent';\r\nimport { map } from 'rxjs/internal/operators/map';\r\nimport { debounceTime } from 'rxjs/internal/operators/debounceTime';\r\nimport { distinctUntilChanged } from 'rxjs/internal/operators/distinctUntilChanged';\r\nimport { mergeMap } from 'rxjs/internal/operators/mergeMap';\r\nimport { startWith } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'add-group',\r\n  templateUrl: './add-group.component.html',\r\n  styleUrls: ['./add-group.component.scss']\r\n})\r\nexport class AddGroupComponent implements OnInit {\r\n  currentUserName = StorageService.getAuthUsername();\r\n  currentUserData = StorageService.getUserData();\r\n  @Output() changeEvent = new EventEmitter<string>();\r\n  form: FormGroup;\r\n  loading = true;\r\n  addGroupModel = false;\r\n  AllUsers = [];\r\n  activeChat: any = {\r\n    chatHistory: []\r\n  };\r\n  message: string = '';\r\n  group_title = '';\r\n  groupnameError = '';\r\n  dialogRef;\r\n  selectedUsers = [];\r\n  CopyAllUsers = [];\r\n  @ViewChild('searchInput') searchInput: ElementRef;\r\n  @Output() setActiveChat = new EventEmitter<string>();\r\n\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    private svc: BaseService,\r\n    private toastr: ToastrService,\r\n    private _fb: FormBuilder,\r\n    private changeDetector: ChangeDetectorRef,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this._fb.group({\r\n      'group_title': new FormControl('', [Validators.required, Validators.maxLength(100)]),\r\n    }, { updateOn: 'change' });\r\n\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter' && !this.loading) {\r\n        this.addGroup();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.searchInput) {\r\n      fromEvent(this.searchInput.nativeElement, 'input')\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(1000),\r\n          distinctUntilChanged(),\r\n          startWith(''),\r\n          mergeMap(value => {\r\n            this.loading = true;\r\n            if (!value) {\r\n              const data = {\r\n                sorting: \"ORDER BY full_name ASC\",\r\n                search_field: \"full_name\",\r\n                search_value: '',\r\n                condition: \"contains\",\r\n              }\r\n              return this.svc.post('AllUsers', data).pipe(map(res => {\r\n                if(!(res.users && res.users.length))\r\n                {\r\n                  res.users = [];\r\n                }\r\n                this.CopyAllUsers = [...res.users];\r\n                return res;\r\n              }))\r\n            }\r\n            const temparaay = [...this.CopyAllUsers];\r\n            const filteruser = temparaay.filter(user => {\r\n              let searchValue = value.toLowerCase();\r\n              if (user.full_name.toLowerCase().startsWith(searchValue)) { return -1; }\r\n            });\r\n            const returnData = {\r\n              users: filteruser\r\n            }\r\n            return of(returnData)\r\n          }),\r\n        )\r\n        .subscribe(res => {\r\n          this.loading = false;\r\n          if (!res.users || !res.users.length) {\r\n            this.toastr.error(\"Opps!\", \"No contacts found\");\r\n            this.AllUsers = [];\r\n          } else {\r\n            this.AllUsers = res.users;\r\n          }\r\n          this.setAlreadySelected();\r\n        })\r\n    }\r\n  }\r\n\r\n  setAlreadySelected() {\r\n    this.selectedUsers.map(user => {\r\n      const userIndex = this.AllUsers.find(alluser => alluser.user_id == user.user_id);\r\n      if (userIndex) userIndex['selected'] = true;\r\n    });\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  selectContact(contact) {\r\n    this.groupnameError = '';\r\n    contact['selected'] = !contact['selected'];\r\n    this.changeDetector.detectChanges();\r\n    this.selectedUsers.push(contact);\r\n    this.selectedUsers = this.selectedUsers.filter(user => user.selected);\r\n    this.selectedUsers = [...new Set(this.selectedUsers)];\r\n    if (!this.selectedUsers.length) {\r\n      this.groupnameError = 'Please Select Contacts';\r\n    } else if (this.selectedUsers.length > 4) {\r\n      this.groupnameError = 'Participants cannot be more than 4';\r\n    }\r\n    console.error('groupnameError', this.groupnameError);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  openDialog(content): void {\r\n    this.groupnameError = '';\r\n    this.selectedUsers = this.selectedUsers.filter(user => user.selected);\r\n    this.changeDetector.detectChanges();\r\n    if (!this.selectedUsers.length) {\r\n      this.groupnameError = 'Please Select Contacts';\r\n      return;\r\n    } else if (this.selectedUsers.length > 4) {\r\n      this.groupnameError = 'Participants cannot be more than 4';\r\n      return;\r\n    }\r\n    if (this.selectedUsers.length == 1) {\r\n      const useridArray = this.selectedUsers.map(user => user.user_id);\r\n      let data = {\r\n        participants: useridArray,\r\n        auto_created: useridArray.length > 1 ? 0 : 1,\r\n        group_title: \"One to One chat\",\r\n      }\r\n      this.svc.post('CreateGroup', data).subscribe(v => {\r\n        this.changeDetector.detectChanges();\r\n        if (v && v.status == 200) {\r\n          this.groupnameError = '';\r\n          this.setActiveChat.emit(v.group);\r\n          this.form.reset();\r\n        }\r\n        this.selectedUsers = [];\r\n        this.changeDetector.detectChanges();\r\n        this.loading = false;\r\n        this.changeEvent.emit(\"THREAD\");\r\n      });\r\n\r\n    } else {\r\n      this.addGroupModel = true;\r\n    }\r\n  }\r\n\r\n  addGroup() {\r\n    FormsHandler.validateForm(this.form);\r\n    const useridArray = this.selectedUsers.map(user => user.user_id);\r\n    console.log(\"userIdArray\" , useridArray);\r\n    if (this.form.invalid || !useridArray.length || this.loading) return;\r\n    if (useridArray.length > 5) {\r\n      this.toastr.error('OPPS!', 'participants Can not be more than 5!');\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.changeDetector.detectChanges();\r\n    let data = {\r\n      participants: useridArray,\r\n      auto_created: useridArray.length > 1 ? 0 : 1\r\n    }\r\n    data = {\r\n      ...data,\r\n      ...this.form.value\r\n    };\r\n    this.svc.post('CreateGroup', data).subscribe(v => {\r\n      this.changeDetector.detectChanges();\r\n      if (v && v.status == 200) {\r\n        this.groupnameError = '';\r\n        this.setActiveChat.emit(v.group);\r\n        this.toastr.success('Success!', 'The group has been created!');\r\n        this.closemodel();\r\n        this.form.reset();\r\n      }\r\n      this.selectedUsers = [];\r\n      this.changeDetector.detectChanges();\r\n      this.loading = false;\r\n    });\r\n  }\r\n  closemodel() {\r\n    this.selectedUsers = [];\r\n    this.addGroupModel = false;\r\n    this.AllUsers.forEach(element => element['selected'] = false);\r\n    this.changeEvent.emit(\"THREAD\");\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  backScreen() {\r\n    this.changeEvent.emit(\"CHAT\");\r\n  }\r\n\r\n}\r\n","<div class=\"newChatContainer\">\r\n  <div class=\"newChatHeader\">\r\n    <div class=\"newChatLeft hand\">\r\n      <img src=\"./assets/images/arrow-left.png\" class=\"arrowLeft hand\" (click)=\"backScreen()\" />\r\n      <p class=\"newChatHeading\">Create Group Chat</p>\r\n    </div>\r\n    <div class=\"newChatRight hand\" (click)=\"openDialog(content)\">\r\n      <img class=\"goodMark\" src=\"./assets/images/checkmark.png\" />\r\n    </div>\r\n  </div>\r\n  <div class=\"newChatSearchBox\">\r\n    <div class=\"input-group\">\r\n      <div class=\"input-group-prepend\">\r\n        <img src=\"./assets/images/search.png\" class=\"seacrchIcon\" />\r\n      </div>\r\n      <input type=\"text\" class=\"form-control\" placeholder=\"Search\" #searchInput />\r\n    </div>\r\n  </div>\r\n  <div class=\"newGrpChat\">\r\n    <p [ngClass]=\"groupnameError ? 'text-danger' :'cntct'\">\r\n      {{groupnameError ? groupnameError :'Select Contacts'}}\r\n    </p>\r\n  </div>\r\n  <div class=\"newListContainer max-height\">\r\n    <ng-container *ngFor=\"let user of AllUsers\">\r\n      <div class=\"contactListCard hand\" (click)=\"selectContact(user)\">\r\n        <div class=\"contactListCardLeft\">\r\n          <img src=\"./assets/images/user.png\" class=\"ListCardIcon\" />\r\n          <p class=\"ListCardName text-capitalize pb-1\">{{user.full_name}}</p>\r\n        </div>\r\n        <div class=\"selectuser contactListCardRight\" *ngIf=\"user['selected']\">\r\n          <img src=\"./assets/images/checkmark-circle.png\" class=\"ListCardButton\" />\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"addGroupModel\">\r\n  <div class=\"createChatPopup\">\r\n    <div class=\"chatPopupContent groupPopup\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Create a group chat</p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"closemodel()\" />\r\n      </div>\r\n      <div class=\"modalContent\">\r\n        <form [formGroup]=\"form\" class=\"w-100\" (submit)=\"addGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group chat</p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"form.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"addGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #content let-modal>\r\n  <div class=\"createChatPopup\">\r\n    <div class=\"chatPopupContent\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Create a group chat</p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"modal.dismiss('Cross click')\" />\r\n      </div>\r\n      <div class=\"modalContent\">\r\n        <form [formGroup]=\"form\" class=\"w-100\" (submit)=\"addGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group chat</p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"form.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"addGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</ng-template>","import { ChangeDetectorRef, Component, ElementRef, OnInit, TemplateRef, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { fromEvent } from 'rxjs/internal/observable/fromEvent';\r\nimport { debounceTime } from 'rxjs/internal/operators/debounceTime';\r\nimport { distinctUntilChanged } from 'rxjs/internal/operators/distinctUntilChanged';\r\nimport { map } from 'rxjs/internal/operators/map';\r\nimport { FindArrayObject } from 'src/app/shared/helpers/helpersFunctions';\r\nimport { BaseService } from 'src/app/shared/services/base.service';\r\nimport { PubsubService } from 'src/app/shared/services/pubsub.service';\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport FormsHandler from 'src/app/shared/FormsHandler/FormsHandler';\r\nimport { MessageModel, onlineOfflineModel, receiptModel, typingModel } from 'src/app/shared/models/chat';\r\nimport { Subscription, timer } from 'rxjs';\r\nimport { VdkM2MCallService } from 'src/app/shared/services/vdk-m2m-call.service';\r\nimport { VdkOne2OneCallService } from 'src/app/shared/services/vdk-one2one-call.service';\r\n\r\n@Component({\r\n  selector: 'chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.scss']\r\n})\r\nexport class ChatComponent implements OnInit {\r\n  @ViewChild('noCall') noCall: TemplateRef<any>;\r\n  @ViewChild('chatDuringCall') chatDuringCall: TemplateRef<any>;\r\n  @ViewChild('incommingAudioCall') incommingAudioCall: TemplateRef<any>;\r\n  @ViewChild('outgoingAudioCall') outgoingAudioCall: TemplateRef<any>;\r\n  @ViewChild('AudioCallInProgress') AudioCallInProgress: TemplateRef<any>;\r\n  @ViewChild('incommingVideoCall') incommingVideoCall: TemplateRef<any>;\r\n  @ViewChild('outgoingVideoCall') outgoingVideoCall: TemplateRef<any>;\r\n  @ViewChild('VideoCallInProgress') VideoCallInProgress: TemplateRef<any>;\r\n\r\n  @ViewChild('groupIncommingAudioCall') groupIncommingAudioCall: TemplateRef<any>;\r\n  @ViewChild('groupOutgoingAudioCall') groupOutgoingAudioCall: TemplateRef<any>;\r\n  @ViewChild('groupOngoingAudioCall') groupOngoingAudioCall: TemplateRef<any>;\r\n  @ViewChild('groupIncommingVideoCall') groupIncommingVideoCall: TemplateRef<any>;\r\n  @ViewChild('groupVideoCall') groupVideoCall: TemplateRef<any>;\r\n\r\n\r\n  ongoingCall = false;\r\n  editGroupModel = false;\r\n  groupForm: FormGroup;\r\n  loading = true;\r\n  AllGroups = [];\r\n  AllUsers = [];\r\n  CopyAllUsers = [];\r\n  activeChat: any = {\r\n    chatHistory: []\r\n  };\r\n  message: string = '';\r\n  currentUserName = StorageService.getAuthUsername();\r\n  currentUserData = StorageService.getUserData();\r\n  @ViewChild('messageInputElement') messageInputElement: ElementRef;\r\n  threadType = 'THREAD';\r\n  fileToSend: File = null;\r\n  isActiveThread = false;\r\n  popupimagesrc = '';\r\n  screen = 'CHAT';\r\n  sdkconnected = false;\r\n  setToActive = null;\r\n  countDownTime: Subscription;\r\n  showChat: true;\r\n  callTime = 0;\r\n  groupOutgoingVideoCall = false;\r\n  calling = {\r\n    participant: [],\r\n    call_type: 'video',\r\n    templateName: 'noCall',\r\n    callerName: '',\r\n    from: \"\",\r\n    session: \"\",\r\n  }\r\n\r\n  settings = {\r\n    isOnInProgressCamara: true,\r\n    isOnInProgressMicrophone: true\r\n  }\r\n\r\n  get selectedTemplate() {\r\n    const templateList = {\r\n      noCall: this.noCall,\r\n      incommingAudioCall: this.incommingAudioCall,\r\n      outgoingAudioCall: this.outgoingAudioCall,\r\n      AudioCallInProgress: this.AudioCallInProgress,\r\n      incommingVideoCall: this.incommingVideoCall,\r\n      outgoingVideoCall: this.outgoingVideoCall,\r\n      VideoCallInProgress: this.VideoCallInProgress,\r\n      groupIncommingAudioCall: this.groupIncommingAudioCall,\r\n      groupOutgoingAudioCall: this.groupOutgoingAudioCall,\r\n      groupOngoingAudioCall: this.groupOngoingAudioCall,\r\n      groupIncommingVideoCall: this.groupIncommingVideoCall,\r\n      groupVideoCall: this.groupVideoCall\r\n    }\r\n    return templateList[this.calling.templateName];\r\n  }\r\n\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    public vdkOne2OneCallSVC: VdkOne2OneCallService,\r\n    public vdkM2MCallSVC: VdkM2MCallService,\r\n    private svc: BaseService,\r\n    private router: Router,\r\n    private elRef: ElementRef,\r\n    public dialog: MatDialog,\r\n    private toastr: ToastrService,\r\n    private changeDetector: ChangeDetectorRef,\r\n    private _fb: FormBuilder\r\n  ) {\r\n    this.groupForm = this._fb.group({\r\n      'group_id': new FormControl('', [Validators.required]),\r\n      'group_title': new FormControl('', [Validators.required, Validators.maxLength(100)]),\r\n    }, { updateOn: 'change' });\r\n    this.pubsubService.initConfigure();\r\n    this.vdkOne2OneCallSVC.initConfigure();\r\n    // this.vdkM2MCallSVC.initConfigure();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.pubsubService.Client.on(\"connect\", response => {\r\n      console.error(\"connect\", response);\r\n      this.sdkconnected = true;\r\n      if (!this.AllGroups.length) {\r\n        this.getAllGroups();\r\n      }\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"disconnect\", (response) => {\r\n      console.log(\"disconnect\", response);\r\n      this.sdkconnected = false;\r\n    });\r\n\r\n    this.vdkOne2OneCallSVC.Client.on(\"register\", response => {\r\n      console.error(\"register response\", response);\r\n    });\r\n\r\n    this.vdkOne2OneCallSVC.Client.on(\"connected\", response => {\r\n      this.sdkconnected = true;\r\n      console.error(\"connected response\", response);\r\n    });\r\n\r\n    this.vdkOne2OneCallSVC.Client.on(\"call\", response => {\r\n\r\n      console.error(\"call response\", response) ;\r\n      console.log(\"ongoing call\" , this.ongoingCall);\r\n\r\n      switch (response.type) {\r\n        case \"CALL_RECEIVED\":\r\n          if(this.ongoingCall){\r\n            this.vdkOne2OneCallSVC.rejectCall(response.from , false);\r\n            return;\r\n          }\r\n          this.calling.session = response.session;\r\n          this.calling.from = response.from;\r\n          this.changeDetector.detectChanges();\r\n          const full_name = this.findUserName(response.from);\r\n          this.calling.callerName = full_name;\r\n          this.calling.templateName = response.call_type == 'video' ? 'incommingVideoCall' : 'incommingAudioCall';\r\n          this.calling.call_type = response.call_type;\r\n          this.changeDetector.detectChanges();\r\n          this.screen = 'MAIN';\r\n          break;\r\n        case \"CALL_ENDED\":\r\n          this.ongoingCall = false;\r\n          this.resetCall();\r\n          break;\r\n        case \"MISSED_CALL\":\r\n          this.resetCall();\r\n          this.toastr.error('You have Missed Call', 'Opps!')\r\n          break;\r\n        case \"CALL_REJECTED\":\r\n          this.ongoingCall = false\r\n          this.resetCall();\r\n          this.toastr.error('User is busy', \"Opps!\");\r\n          break;\r\n        case \"CALL_ACCEPTED\":\r\n          if (response.to) {\r\n            this.changeDetector.detectChanges();\r\n            this.calling.templateName = this.calling.call_type == 'video' ? 'VideoCallInProgress' : 'AudioCallInProgress';\r\n            this.startWatch();\r\n            this.changeDetector.detectChanges();\r\n          }\r\n\r\n          break;\r\n        case \"CALL_STATUS\":\r\n          const displaystyle = response.video_status ? 'block' : 'none';\r\n          const callerHolderstyle = response.video_status ? 'none' : 'block';\r\n          if (document.getElementById('remoteVideo')) document.getElementById('remoteVideo').style.display = displaystyle;\r\n          if (document.getElementById('callerHolder')) document.getElementById('callerHolder').style.display = callerHolderstyle;\r\n          break;\r\n      }\r\n    });\r\n\r\n    // this.vdkM2MCallSVC.Client.on(\"connected\", responses => {\r\n    //   console.error(\"m2m connected response\", response);\r\n    // });\r\n\r\n    this.vdkOne2OneCallSVC.Client.on(\"groupCall\", response => {\r\n      console.error(\"groupCall response\", response);\r\n      switch (response.type) {\r\n\r\n        case \"CALL_RECEIVED\":\r\n          this.screen = 'MAIN'\r\n          this.calling.callerName = this.findUserName(response.from);\r\n          this.calling.templateName = response.call_type == 'video' ? 'groupIncommingVideoCall' : 'groupIncommingAudioCall';\r\n          this.calling.call_type = response.call_type;\r\n          this.changeDetector.detectChanges();\r\n          break;\r\n        case \"NEW_PARTICIPANT\":\r\n          this.calling.templateName = this.calling.call_type == 'video' ? 'groupVideoCall' : 'groupOngoingAudioCall';\r\n          this.groupOutgoingVideoCall = false;\r\n          this.addParticipant(response);\r\n          break;\r\n        case \"PARTICIPANT_LEFT\":\r\n          document.getElementById(\"sendInputContainer\").style.display = 'flex';\r\n          document.getElementById('roomNameText').style.display = \"block\";\r\n          document.getElementById('appendChatDuringCall').style.display = \"none\";\r\n          document.getElementById('returnedtocall').style.display = \"none\";\r\n          this.removeParticipant(response);\r\n          break;\r\n        case \"CALL_STARTED\":\r\n          this.startWatch();\r\n          break;\r\n        case \"PARTICIPANT_STATUS\":\r\n          const displaystyle = response.video_status ? 'block' : 'none';\r\n          if (document.getElementById(response.participant)) document.getElementById(response.participant).style.display = displaystyle;\r\n          break;\r\n      }\r\n    });\r\n  }\r\n  chatDCall()\r\n  {\r\n    return true;\r\n  }\r\n  ngAfterViewInit(): void {\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter') {\r\n        this.sendTextMessage();\r\n      }\r\n    });\r\n    this.getUsers();\r\n\r\n    this.pubsubService.Client.on(\"authentication_error\", (res: any) => {\r\n      console.log(\"authentication_error\", res);\r\n    });\r\n\r\n\r\n    this.pubsubService.Client.on(\"offline\", response => {\r\n      console.log(\"offline\", response);\r\n      this.setOfflineStatus(response);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"online\", (response: onlineOfflineModel) => {\r\n      console.log(\"online\", response);\r\n      this.setOnlineStatus(response);\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"message\", response => {\r\n      response = JSON.parse(JSON.stringify(response));\r\n      console.trace(\"new message\", response);\r\n      if (response.type == 'text' || response.type == 'file' || response.type == 'image' || response.type == 'audio' || response.type == 'video') {\r\n        this.scroll();\r\n        const chatthread = this.findChatThread(response.to);\r\n        const isActiveThread = chatthread.id == this.activeChat.id;\r\n        chatthread['unReadCount'] = isActiveThread ? 0 : (chatthread['unReadCount'] || 0) + 1;\r\n        response = this.messageBy(chatthread, response);\r\n        response['isRead'] = isActiveThread;\r\n        response['auto_created'] = chatthread['auto_created'];\r\n        chatthread['lastMessage'] = response.content;\r\n        chatthread['time'] = new Date(response.id);\r\n        chatthread['type'] = response.type;\r\n        this.pushMessage(chatthread, response);\r\n        this.readSingleMessage(response, isActiveThread);\r\n        setTimeout(() => {\r\n          this.AllGroups.sort((a, b) => {\r\n            return a.id == chatthread.id ? -1 : 1;\r\n          });\r\n        }, 500);\r\n        this.changeDetector.detectChanges();\r\n      } else if (response.type == 'typing') {\r\n        this.setUserTyping(response);\r\n      } else if (response.receiptType == 3) {\r\n        let chName = response.topic || response.to;\r\n        if (response.to != undefined)\r\n          chName = response.to;\r\n        const chatthread = this.findChatThread(chName);\r\n        let message = FindArrayObject(chatthread.chatHistory, 'id', response.messageId);\r\n        if (message) {\r\n          message['readCount'] = (message['readCount'] || 0) + 1\r\n        }\r\n        this.changeDetector.detectChanges();\r\n      }\r\n    });\r\n\r\n    this.pubsubService.Client.on(\"subscribed\", response => {\r\n      console.log(\"subscribed\", response);\r\n      this.setOnlineStatusforSubscribe(response);\r\n    });\r\n\r\n    if (this.messageInputElement) {\r\n      fromEvent(this.messageInputElement.nativeElement, 'input')\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(3000),\r\n          distinctUntilChanged()\r\n        ).subscribe(data => {\r\n          const sendMessage: MessageModel = {\r\n            status: 0,\r\n            size: 0,\r\n            type: \"typing\",\r\n            isGroupMessage: false,\r\n            from: StorageService.getAuthUsername(),\r\n            content: '0',\r\n            id: new Date().getTime().toString(),\r\n            key: this.activeChat.channel_key,\r\n            to: this.activeChat.channel_name,\r\n            date: new Date().getTime(),\r\n          }\r\n          this.pubsubService.sendMessage(sendMessage);\r\n        });\r\n    }\r\n  }\r\n\r\n  getUsers() {\r\n    const data = {\r\n      sorting: \"ORDER BY full_name ASC\",\r\n      search_field: \"full_name\",\r\n      search_value: '',\r\n      condition: \"contains\",\r\n    }\r\n    this.svc.post('AllUsers', data).subscribe(res => {\r\n      this.loading = false;\r\n      if (res.status == 200) {\r\n        this.CopyAllUsers = [...res.users];\r\n        this.AllUsers = res.users;\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteGroup(group) {\r\n    this.loading = true;\r\n    const playload = {\r\n      group_id: group.id\r\n    }\r\n    this.svc.post('DeleteGroup', playload).subscribe(v => {\r\n      this.changeDetector.detectChanges();\r\n      if (v && v.status == 200) {\r\n        this.loading = false;\r\n        this.getAllGroups();\r\n        this.toastr.success('The group has been deleted!', 'Success!');\r\n      } else {\r\n        console.error(v.message);\r\n        alert(v.message);\r\n        this.changeDetector.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  openModal(group) {\r\n    if (group.auto_created) {\r\n      alert('Can not change One to one group title');\r\n      return;\r\n    }\r\n    group['group_id'] = group.id\r\n    this.groupForm.reset(group);\r\n    this.editGroupModel = true;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  editGroup() {\r\n    FormsHandler.validateForm(this.groupForm);\r\n    console.error(\"this.groupForm.\", this.groupForm.invalid);\r\n    if (this.groupForm.invalid || this.loading) return;\r\n    const playload = this.groupForm.value;\r\n    this.loading = true;\r\n    this.svc.post('RenameGroup', playload).subscribe(v => {\r\n      if (v && v.status == 200) {\r\n        this.getAllGroups();\r\n        this.editGroupModel = false;\r\n        this.loading = false;\r\n        this.toastr.success('The group has been updated!', 'Success!');\r\n      }\r\n    });\r\n  }\r\n\r\n  getAllGroups() {\r\n    this.loading = true;\r\n    this.svc.get('AllGroups').subscribe(v => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        this.AllGroups = v.groups.map(chat => {\r\n          if (chat['participants'].length) {\r\n            chat['participants'] = chat['participants'].map(r => {\r\n              r['username'] = r['username'] || r['full_name'];\r\n              return r;\r\n            });\r\n          }\r\n          chat['chatTitle'] = chat.auto_created ? chat['participants'][0]['full_name'] : chat.group_title;\r\n          chat['Online'] = false;\r\n          chat['key'] = chat.channel_key;\r\n          chat['channel'] = chat.channel_name;\r\n          chat['chatHistory'] = [];\r\n          chat['TotalParticipants'] = chat['participants'].length;\r\n          chat['onlineParticipants'] = 1;\r\n          chat['isSeen'] = true;\r\n          return chat;\r\n        });\r\n        console.error(\"this.activeChat.chatTitle\", this.activeChat);\r\n        if (!this.activeChat.chatTitle) {\r\n          this.activeChat = this.AllGroups.length ? this.AllGroups['0'] : {};\r\n        }\r\n        if (this.setToActive) {\r\n          const indexchat = this.AllGroups.find(group => group.id == this.setToActive)\r\n          this.activeChat = indexchat ? indexchat : this.AllGroups['0'];\r\n          this.setToActive = null;\r\n        }\r\n        this.isActiveThread = true;\r\n        console.error(\"this.activeChat.chatTitle\", this.activeChat);\r\n        this.pubsubService.subscribeToChat(this.AllGroups);\r\n      }\r\n      setTimeout(() => {\r\n        this.sortThread();\r\n      }, 500);\r\n      this.changeDetector.detectChanges();\r\n    });\r\n  }\r\n\r\n  checkFileType(content: any) {\r\n    let preview = content.includes('text/plain') ? ('./assets/images/txt.png') : content.includes('/pdf') ? ('./assets/images/pdf.png') : content.includes('/json') ? ('./assets/images/json.png') : 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Icon-doc.svg/810px-Icon-doc.svg.png';\r\n    if (content.includes('video/'))\r\n      preview = './assets/images/video.png';\r\n    if (content.includes('audio/'))\r\n      preview = './assets/images/audio.png';\r\n    return preview;\r\n  }\r\n\r\n  fileType(content: any) {\r\n    return content.split(\";\")[0].split(\":\")[1]\r\n  }\r\n\r\n  findChatThread(channel) {\r\n    return FindArrayObject(this.AllGroups, 'channel_name', channel);\r\n  }\r\n\r\n  setActiveChat(group) {\r\n    console.log(\"clicke\");\r\n    this.isActiveThread = group.id == this.activeChat.id;\r\n    if (!this.isActiveThread) this.message = '';\r\n    this.activeChat = group;\r\n    group['unReadCount'] = 0;\r\n    this.screen = 'MSG';\r\n    this.scroll();\r\n    group.chatHistory = group.chatHistory || [];\r\n    this.readsendMessage(group.chatHistory);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  setChatDuringCall(){\r\n    console.log(\"active chat\" , this.activeChat);\r\n    document.getElementById(\"returnedtocall\").style.display = 'flex';\r\n    document.getElementById('messagesBox').style.display = 'none';\r\n    document.getElementById('appendChatDuringCall').style.display = \"block\";\r\n    let el = document.getElementById(\"sendInputContainer\");\r\n    el.removeAttribute('hidden');\r\n    document.getElementById(\"sendInputContainer\").style.display = 'flex';\r\n    document.getElementById('roomNameText').style.display = \"block\";\r\n  }\r\n  returntoCall(){\r\n    document.getElementById('appendChatDuringCall').style.display = \"none\";\r\n    document.getElementById('returnedtocall').style.display = \"none\";\r\n    document.getElementById('messagesBox').style.display = 'block';\r\n    document.getElementById('roomNameText').style.display = \"none\";\r\n    document.getElementById(\"sendInputContainer\").style.display = 'none';\r\n  }\r\n  setchat(chat) {\r\n    \r\n    this.setActiveChat(chat);\r\n    this.setToActive = chat.id;\r\n    if(chat.clicked_item == \"audio\"){\r\n      this.startone2oneAudioCall();\r\n    }\r\n    if(chat.clicked_item == \"video\"){\r\n      this.startOne2OneVideoCall();\r\n    }\r\n  }\r\n\r\n  readSingleMessage(response, isActiveThread) {\r\n    if (response.from == this.currentUserName || !isActiveThread) return;\r\n    const chatobj: receiptModel = {\r\n      messageId: response.id,\r\n      receiptType: 3,\r\n      from: StorageService.getAuthUsername(),\r\n      key: response.key,\r\n      to: response.to,\r\n      date: new Date().getTime()\r\n    };\r\n    this.pubsubService.readSingleMessage(chatobj);\r\n  }\r\n\r\n  readsendMessage(chatHistory) {\r\n    const unreadchatHistory = chatHistory.filter(chat => !chat.isRead).map(chat => {\r\n      const chatobj: receiptModel = {\r\n        messageId: chat.id,\r\n        receiptType: 3,\r\n        from: StorageService.getAuthUsername(),\r\n        key: chat.key,\r\n        to: chat.to,\r\n        date: new Date().getTime()\r\n      };\r\n      return chatobj;\r\n    });\r\n    if (unreadchatHistory.length) this.pubsubService.readMessage(unreadchatHistory);\r\n    chatHistory = chatHistory.map(chat => {\r\n      chat.isRead = true;\r\n      return chat;\r\n    });\r\n  }\r\n\r\n  handleFileInput(files: FileList) {\r\n    this.fileToSend = files.item(0);\r\n  }\r\n\r\n  invalidSize() {\r\n    return ((this.fileToSend.size / 1024) > 6144);\r\n  }\r\n\r\n  removeAttachment() {\r\n    this.fileToSend = null;\r\n  }\r\n\r\n  getFileType(fileR) {\r\n    let type = \"file\";\r\n    const filetype = fileR.type;\r\n    if (filetype.includes('image')) type = \"image\";\r\n    else if (filetype.includes('audio')) type = \"audio\";\r\n    else if (filetype.includes('video')) type = \"video\";\r\n    return type;\r\n  }\r\n\r\n  sendTextMessage() {\r\n    if ((!(/\\S/.test(this.message))) && !this.fileToSend) {\r\n      return;\r\n    } else if (this.message.length > 400) {\r\n      this.toastr.error(\"Message can not be more than 400 characters\", \"Opps!\")\r\n      return;\r\n    } else if (this.fileToSend && this.invalidSize()) {\r\n      this.toastr.error(\"The maximum size of file should be 6MBs.\", \"Opps!\")\r\n      this.fileToSend = null;\r\n      return;\r\n    }\r\n    this.scroll();\r\n    if (!this.message && !this.fileToSend) return;\r\n    if (this.fileToSend) {\r\n      var option = {\r\n        id: new Date().getTime().toString(),\r\n        from: StorageService.getAuthUsername(),\r\n        topic: this.activeChat.channel_name,\r\n        to: this.activeChat.channel_name,\r\n        key: this.activeChat.channel_key,\r\n        type: this.getFileType(this.fileToSend),\r\n        date: new Date().getTime(),\r\n      };\r\n      console.log(\"file to send\", this.fileToSend);\r\n      const toBase64 = file => new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => resolve(reader.result);\r\n        reader.onerror = error => reject(error);\r\n      });\r\n      let base64 = toBase64(this.fileToSend);\r\n      console.log(\"base64444\", base64);\r\n      this.pubsubService.Client.SendFile(this.fileToSend, option);\r\n      this.fileToSend = null;\r\n    }\r\n    if (!this.message) return;\r\n    const sendMessage: MessageModel = {\r\n      status: 1,\r\n      size: 0,\r\n      type: \"text\",\r\n      isGroupMessage: false,\r\n      from: StorageService.getAuthUsername(),\r\n      content: this.message,\r\n      id: new Date().getTime().toString(),\r\n      date: new Date().getTime(),\r\n      key: this.activeChat.channel_key,\r\n      to: this.activeChat.channel_name\r\n    }\r\n    this.pubsubService.sendMessage(sendMessage);\r\n    this.message = '';\r\n    this.scroll();\r\n    if (!(this.AllGroups.length && this.activeChat.id == this.AllGroups[0].id)) {\r\n      this.sortThread();\r\n    }\r\n  }\r\n\r\n  typingmessage($event) {\r\n    if ($event.key === \"Enter\") {\r\n      this.sendTextMessage();\r\n      return;\r\n    }\r\n    const sendMessage: MessageModel = {\r\n      status: 0,\r\n      size: 0,\r\n      type: \"typing\",\r\n      isGroupMessage: false,\r\n      from: StorageService.getAuthUsername(),\r\n      content: \"1\",\r\n      id: new Date().getTime().toString(),\r\n      key: this.activeChat.channel_key,\r\n      to: this.activeChat.channel_name,\r\n      date: new Date().getTime(),\r\n    }\r\n    this.pubsubService.sendMessage(sendMessage);\r\n  }\r\n\r\n  setOnlineStatusforSubscribe(response: onlineOfflineModel) {\r\n    const indexchat = this.findChatThread(response.channel);\r\n    if (indexchat) {\r\n      let onlineNumbers = [...new Set(response.who.map(n => n.username))]\r\n      indexchat['onlineParticipants'] = onlineNumbers && onlineNumbers.length || 1;\r\n      if (indexchat && indexchat.auto_created) indexchat['Online'] = onlineNumbers.length > 1\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  setOnlineStatus(response: onlineOfflineModel) {\r\n    let indexchat = this.findChatThread(response.channel);\r\n    if (!indexchat) return;\r\n    if (indexchat.auto_created) indexchat['Online'] = true;\r\n    if (!indexchat.auto_created) {\r\n      indexchat['onlineParticipants'] = indexchat['onlineParticipants'] < indexchat['TotalParticipants'] ? indexchat['onlineParticipants'] + 1 : indexchat['onlineParticipants'];\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  setOfflineStatus(response: onlineOfflineModel) {\r\n    const indexchat = this.findChatThread(response.channel);\r\n    if (indexchat && indexchat.auto_created) indexchat['Online'] = false;\r\n    if (!indexchat.auto_created) {\r\n      indexchat['onlineParticipants'] = indexchat['onlineParticipants'] > 2 ? indexchat['onlineParticipants'] - 1 : 1;\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  setUserTyping(response: typingModel) {\r\n    if (response.from == this.currentUserData.ref_id) return;\r\n    let indexchat = FindArrayObject(this.AllGroups, 'channel_name', response.to);\r\n    let typinguser = indexchat[\"participants\"].find(e => e.ref_id == response.from);\r\n    if (response.content == '1') {\r\n      indexchat['TypingUserList'] = (indexchat['TypingUserList'] || []);\r\n      indexchat['TypingUserList'] = [...new Set([typinguser])];\r\n    } else if (response.content == '0') {\r\n      indexchat['TypingUserList'] = indexchat['TypingUserList'].filter(e => e.ref_id != response.from);\r\n    }\r\n    indexchat['userTyping'] = indexchat['TypingUserList'].length && response.content != '0';\r\n    let nameList = indexchat['TypingUserList'].map(userObj => userObj.full_name);\r\n    if (nameList.length == 1) {\r\n      indexchat['userTypingContent'] = nameList + ' ' + 'is typing...';\r\n    } else if (nameList.length == 2) {\r\n      indexchat['userTypingContent'] = nameList.join() + ' ' + 'are typing...';\r\n    } else if (nameList.length > 2) {\r\n      indexchat['userTypingContent'] = nameList.filter((i, j) => j < 2).join() + ' ' + 'and other are typing...';\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  setMultiUserTyping(response, typinguser, indexchat) {\r\n    if (response.content == '1') {\r\n      indexchat['TypingUserList'] = [...new Set(typinguser)];\r\n    } else if (response.content == '0') {\r\n      indexchat['TypingUserList'] = indexchat['TypingUserList'].filter(e => e.ref_id != response.from);\r\n    }\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  scroll(): void {\r\n    setTimeout(() => {\r\n      this.elRef.nativeElement.querySelector('.messagesBox').scrollTop = this.elRef.nativeElement.querySelector('.messagesBox').scrollHeight;\r\n    }, 500);\r\n  }\r\n\r\n  changeSidebar($event) {\r\n    this.threadType = $event;\r\n    if (this.threadType == 'THREAD') {\r\n      this.getAllGroups();\r\n    }\r\n  }\r\n\r\n  newChat() {\r\n    this.threadType = 'CHAT';\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  logout() {\r\n    this.pubsubService.Disconnect();\r\n    StorageService.clearLocalStorge();\r\n    this.router.navigate(['login']);\r\n  }\r\n\r\n  sortThread() {\r\n    if (this.activeChat.id) {\r\n      this.AllGroups.sort((a, b) => {\r\n        return a.id == this.activeChat.id ? -1 : 1;\r\n      });\r\n    }\r\n  }\r\n\r\n  messageBy(chatthread, response) {\r\n    if (this.isShowName(chatthread, response)) {\r\n      const messageByObj = FindArrayObject(chatthread.participants, 'ref_id', response.from);\r\n      response['messageBy'] = messageByObj && messageByObj.full_name || '';\r\n    }\r\n    return response;\r\n  }\r\n\r\n  isShowName(chatthread, response) {\r\n    if (chatthread['chatHistory'].length && response.from) {\r\n      const previourmessage = chatthread['chatHistory'][chatthread['chatHistory'].length - 1];\r\n      return previourmessage.from != response.from;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  pushMessage(thread, response) {\r\n    let newResponse = {};\r\n    newResponse = JSON.parse(JSON.stringify(response));\r\n    if (response.type == 'text' || !response.content) {\r\n      thread['chatHistory'].push(newResponse);\r\n    } else {\r\n      var foundIndex = thread.chatHistory.findIndex(x => x.id == response.id);\r\n      thread.chatHistory[foundIndex] = response;\r\n    }\r\n  }\r\n\r\n  getLastMessage(group): string {\r\n    const isactivethread = group.id == this.activeChat.id;\r\n    if (!isactivethread && group.unReadCount) {\r\n      return \"Misread messages\"\r\n    } else if (group.type != 'text') {\r\n      return group.type;\r\n    }\r\n    return group.lastMessage;\r\n  }\r\n\r\n  openImage(imagesrc): void {\r\n    this.popupimagesrc = imagesrc;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  closeImage() {\r\n    this.popupimagesrc = null;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  closeModal() {\r\n    this.editGroupModel = false;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  isHideThread() {\r\n    return this.isMobile() ? this.screen != 'CHAT' : false;\r\n  }\r\n\r\n  isHideChatScreen() {\r\n    return this.isMobile() ? this.screen != 'MSG' : false;\r\n  }\r\n\r\n  backScreen() {\r\n    this.threadType = \"THREAD\";\r\n    this.screen = \"CHAT\";\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  isMobile() {\r\n    return window.innerWidth < 768\r\n  }\r\n\r\n\r\n  findUserName(ref_id: string): string {\r\n    const user = FindArrayObject(this.CopyAllUsers, 'ref_id', ref_id);\r\n    return user ? user.full_name : '';\r\n  }\r\n\r\n\r\n  resetCall() {\r\n    document.getElementById(\"sendInputContainer\").style.display = 'flex';\r\n    document.getElementById('roomNameText').style.display = \"block\";\r\n    document.getElementById('appendChatDuringCall').style.display = \"none\";\r\n    document.getElementById('returnedtocall').style.display = \"none\";\r\n\r\n    this.settings = {\r\n      isOnInProgressCamara: true,\r\n      isOnInProgressMicrophone: true\r\n    }\r\n    this.calling = {\r\n      participant: [],\r\n      call_type: 'video',\r\n      templateName: 'noCall',\r\n      callerName: '',\r\n      from: \"\",\r\n      session: \"\",\r\n    }\r\n    this.callTime = 0;\r\n    this.screen = 'LISTING';\r\n    if (this.countDownTime) {\r\n      this.countDownTime.unsubscribe()\r\n    }\r\n    if (document.getElementById('OutgoingVideo')) document.getElementById('OutgoingVideo').style.display = 'block';\r\n    this.changeDetector.detectChanges();\r\n    this.ongoingCall = false;\r\n  }\r\n  stopCall() {\r\n    document.getElementById(\"sendInputContainer\").style.display = 'flex';\r\n    document.getElementById('roomNameText').style.display = \"block\";\r\n    document.getElementById('appendChatDuringCall').style.display = \"none\";\r\n    document.getElementById('returnedtocall').style.display = \"none\";\r\n    this.ongoingCall = false;\r\n    this.calling.templateName = 'noCall';\r\n    this.vdkOne2OneCallSVC.endCall();\r\n    this.vdkOne2OneCallSVC.leaveGroupCall();\r\n    this.resetCall();\r\n    this.changeDetector.detectChanges();\r\n    console.error(\"stopCall\");\r\n  }\r\n\r\n  inCall(): boolean {\r\n    return this.calling.templateName != 'noCall';\r\n  }\r\n  startVideoCall() {\r\n    this.resetCall();\r\n    if (this.activeChat.auto_created) {\r\n      this.startOne2OneVideoCall();\r\n    } else {\r\n      this.startM2MVideoCall();\r\n    }\r\n  }\r\n  startOne2OneVideoCall() {\r\n    if (this.inCall()) return;\r\n    this.calling.session = 'one_to_one';\r\n    document.getElementById('OutgoingVideo').style.display = 'block';\r\n    this.startWatch();\r\n    this.screen = 'MAIN';\r\n    this.ongoingCall = true;\r\n    this.calling.templateName = 'outgoingVideoCall';\r\n    // this.calling['callerName'] = this.activeChat.chatTitle;\r\n    this.calling.callerName = this.activeChat.chatTitle ? this.activeChat.chatTitle : this.activeChat.group_title;\r\n\r\n    this.changeDetector.detectChanges();\r\n    const participantsList = this.activeChat.participants.filter(g => g.ref_id != this.currentUserName).map(g => g.ref_id);\r\n    const params = {\r\n      localVideo: document.getElementById(\"localVideo\"),\r\n      remoteVideo: document.getElementById(\"remoteVideo\"),\r\n      to: [...participantsList],\r\n    }\r\n    this.vdkOne2OneCallSVC.Call(params);\r\n  }\r\n\r\n  startM2MVideoCall() {\r\n    if (this.inCall()) return;\r\n    const p = this.getChatParticipants();\r\n    if (!p.length) {\r\n      this.toastr.error('Please select someone to call!', 'Opps!')\r\n      return;\r\n    }\r\n    this.ongoingCall = true;\r\n    this.screen = 'MAIN';\r\n    this.groupOutgoingVideoCall = true;\r\n    this.calling.templateName = 'groupVideoCall';\r\n    this.calling['callerName'] = this.activeChat.chatTitle;\r\n    this.changeDetector.detectChanges();\r\n    const params = {\r\n      call_type: \"video\",\r\n      localVideo: document.getElementById(\"localVideo\"),\r\n      to: [...p],\r\n    }\r\n    this.vdkOne2OneCallSVC.groupCall(params);\r\n  }\r\n\r\n  acceptcall() {\r\n    console.error(\"acceptcall\");\r\n    if (this.calling.session == 'one_to_one') {\r\n      console.error(\"acceptcall one_to_one\");\r\n      this.acceptOne2oneCall();\r\n    } else {\r\n      console.error(\"acceptcall acceptM2MCall\");\r\n      this.acceptM2MCall();\r\n    }\r\n  }\r\n\r\n  acceptOne2oneCall() {\r\n    this.vdkOne2OneCallSVC.acceptCall(document.getElementById(\"localVideo\"), document.getElementById(\"remoteVideo\"));\r\n    this.changeDetector.detectChanges();\r\n    this.calling.templateName = this.calling.call_type == 'video' ? 'VideoCallInProgress' : 'AudioCallInProgress';\r\n    this.startWatch();\r\n    this.ongoingCall = true;\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  acceptM2MCall() {\r\n    if (this.isM2MProgressCall()) return;\r\n    this.ongoingCall = true;\r\n    this.calling.templateName = this.calling.call_type == 'video' ? 'groupVideoCall' : 'groupOngoingAudioCall';\r\n    this.changeDetector.detectChanges();\r\n    const params = {\r\n      localVideo: document.getElementById(\"localVideo\"),\r\n      call_type: this.calling.call_type\r\n    }\r\n    this.startWatch();\r\n    this.changeDetector.detectChanges();\r\n    this.groupOutgoingVideoCall = false;\r\n    this.vdkOne2OneCallSVC.joinGroupCall(params);\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n  startWatch() {\r\n    console.trace()\r\n    if (!this.callTime) {\r\n      this.countDownTime = timer(0, 1000).subscribe(() => ++this.callTime);\r\n    }\r\n  }\r\n\r\n  startAudioCall() {\r\n    if (this.activeChat.auto_created) {\r\n      this.startone2oneAudioCall();\r\n    } else {\r\n      this.startm2mAudioCall();\r\n    }\r\n  }\r\n\r\n  startone2oneAudioCall() {\r\n    if (this.inCall()) return;\r\n    const participantsList = this.getChatParticipants();\r\n    if (!participantsList.length) {\r\n      this.toastr.error('Please select someone to call!', 'Opps!')\r\n      return;\r\n    }\r\n    this.calling.session = 'one_to_one';\r\n    this.calling.call_type = 'audio';\r\n    this.ongoingCall = true;\r\n    this.screen = 'MAIN';\r\n    this.calling.templateName = 'outgoingAudioCall';\r\n    this.calling.callerName = this.activeChat.chatTitle ? this.activeChat.chatTitle : this.activeChat.group_title;\r\n\r\n    const params = {\r\n      localVideo: document.getElementById(\"localVideo\"),\r\n      remoteVideo: document.getElementById(\"remoteVideo\"),\r\n      to: [...participantsList],\r\n      data: { calleName: this.currentUserData.full_name }\r\n    }\r\n    this.vdkOne2OneCallSVC.audioCall(params);\r\n  }\r\n\r\n  startm2mAudioCall() {\r\n    if (this.inCall()) return;\r\n    const participants = this.getChatParticipants();\r\n    if (!participants.length) {\r\n      this.toastr.error('Please select someone to call!', 'Opps!')\r\n      return;\r\n    }\r\n    this.calling.call_type = 'audio';\r\n    this.ongoingCall = true;\r\n    this.screen = 'MAIN';\r\n    this.calling.templateName = 'groupOutgoingAudioCall';\r\n    this.calling['callerName'] = this.activeChat.chatTitle;\r\n\r\n    const params = {\r\n      call_type: \"audio\",\r\n      localVideo: document.getElementById(\"localAudio\"),\r\n      to: [...participants],\r\n    }\r\n    this.vdkOne2OneCallSVC.groupCall(params);\r\n  }\r\n\r\n  changeSettings(filed) {\r\n    if (this.calling.session == 'one_to_one') {\r\n      this.changeOne2OneSettings(filed);\r\n    } else {\r\n      this.changeM2MSettings(filed);\r\n    }\r\n  }\r\n\r\n  changeOne2OneSettings(filed) {\r\n    this.settings[filed] = !this.settings[filed];\r\n    switch (filed) {\r\n      case 'isOnInProgressCamara':\r\n        this.settings[filed] ? this.vdkOne2OneCallSVC.setCameraOn() : this.vdkOne2OneCallSVC.setCameraOff();\r\n        const displaystyle = this.settings[filed] ? 'block' : 'none';\r\n        if (document.getElementById('OutgoingVideo')) document.getElementById('OutgoingVideo').style.display = displaystyle;\r\n        break;\r\n      case 'isOnInProgressMicrophone':\r\n        this.settings[filed] ? this.vdkOne2OneCallSVC.setMicUnmute() : this.vdkOne2OneCallSVC.setMicMute();\r\n        const enabled = this.settings[filed];\r\n        const audiotrack: any = (<HTMLInputElement>document.getElementById(\"localAudio\"));\r\n        if (audiotrack && audiotrack.audioTracks) {\r\n          audiotrack.audioTracks[0].enabled = enabled;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  changeM2MSettings(filed) {\r\n    this.settings[filed] = !this.settings[filed];\r\n    switch (filed) {\r\n      case 'isOnInProgressCamara':\r\n        this.settings[filed] ? this.vdkOne2OneCallSVC.setCameraOn() : this.vdkOne2OneCallSVC.setCameraOff();\r\n        const displaystyle = this.settings[filed] ? 'block' : 'none';\r\n        const displayNamestyle = this.settings[filed] ? 'none' : 'block';\r\n        document.getElementById('localVideo').style.display = displaystyle;\r\n        document.getElementById('localNameHolder').style.display = displayNamestyle;\r\n        break;\r\n      case 'isOnInProgressMicrophone':\r\n        this.settings[filed] ? this.vdkOne2OneCallSVC.setMicUnmute() : this.vdkOne2OneCallSVC.setMicMute();\r\n        const enabled = this.settings[filed];\r\n        const audiotrack: any = (<HTMLInputElement>document.getElementById(\"localAudio\"));\r\n        if (audiotrack && audiotrack.audioTracks) {\r\n          audiotrack.audioTracks[0].enabled = enabled;\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  isShowRemoteVideo(): boolean {\r\n    return this.calling.templateName != 'VideoCallInProgress' && this.calling.call_type != 'video';\r\n  }\r\n\r\n  isHideLocalVideo(): boolean {\r\n    const ishide = !(this.calling.templateName == 'VideoCallInProgress' || this.calling.templateName == 'outgoingVideoCall');\r\n    return ishide;\r\n  }\r\n\r\n  isShowOne2oneCall() {\r\n    const one2onetemplateList = `noCall,incommingAudioCall,outgoingAudioCall,\r\n    AudioCallInProgress,incommingVideoCall,outgoingVideoCall,VideoCallInProgress`\r\n    return one2onetemplateList.includes(this.calling.templateName);\r\n  }\r\n\r\n  isShowM2MCall() {\r\n    const one2onetemplateList = `groupIncommingAudioCall,groupOutgoingAudioCall,groupOngoingAudioCall,\r\n    groupIncommingVideoCall,groupVideoCall`;\r\n    return one2onetemplateList.includes(this.calling.templateName);\r\n  }\r\n\r\n  isM2MProgressCall() {\r\n    return this.calling.templateName == 'groupVideoCall' || this.calling.templateName == 'groupOngoingAudioCall';\r\n  }\r\n\r\n  addParticipant(response) {\r\n    const user = this.AllUsers.find(user => user.ref_id == response.participant);\r\n    this.calling.participant.push(user);\r\n    this.changeDetector.detectChanges();\r\n    setTimeout(() => {\r\n      this.changeDetector.detectChanges();\r\n      this.vdkOne2OneCallSVC.setParticipantVideo(response.participant, document.getElementById(response.participant));\r\n      const user = this.findUserName(response.participant);\r\n      const textmsg = user + ' ' + 'has joined';\r\n      this.toastr.success(textmsg);\r\n    });\r\n    this.changeDetector.detectChanges();\r\n  }\r\n\r\n\r\n  removeParticipant(response) {\r\n    //this.ongoingCall = false;\r\n    const index = this.calling.participant.findIndex(user => user.ref_id == response.participant);\r\n    if (index >= 0) {\r\n      const user = this.findUserName(response.participant);\r\n      if (user) {\r\n        const textmsg = user + ' ' + 'has left';\r\n        this.toastr.success(textmsg);\r\n      }\r\n      this.calling.participant.splice(index, 1);\r\n      if (!this.calling.participant.length) {\r\n        this.resetCall();\r\n      }\r\n    }\r\n\r\n    this.changeDetector.detectChanges();\r\n  }\r\n  private getChatParticipants() {\r\n    let participants = [];\r\n    if (this.activeChat && this.activeChat['participants'] && this.activeChat['participants'].length) {\r\n      participants = this.activeChat['participants'].filter(g => g.ref_id != this.currentUserName).map(g => g.ref_id);\r\n    }\r\n    return participants;\r\n  }\r\n}\r\n","<div class=\"row dashboardContainer\">\r\n  <!-- popup end -->\r\n  <div class=\"col-sm-4 leftSide\" [hidden]=\"isHideThread()\">\r\n    <div class=\"leftSideHeader\">\r\n      <img src=\"./assets/images/logo2.png\" class=\"dashboardLogo\" />\r\n    </div>\r\n    <div class=\"leftSideListContainer\">\r\n\r\n      <ng-container *ngIf=\"threadType === 'THREAD'\">\r\n        <div style=\"align-items: center; margin:0px\" class=\"leftSectionHeader\">\r\n          <h4 class=\"leftHeading\">CHATROOMS</h4>\r\n          <h4 class=\"createText\" (click)=\"newChat()\">Create +</h4>\r\n        </div>\r\n        <!-- empty chats section start-->\r\n        <div class=\"leftSectionEmptyContainer\" *ngIf=\"!AllGroups.length && !loading\">\r\n          <p class=\"noAvailableText\">No Available ChatRoom</p>\r\n          <p class=\"tapText\">Tap and hold on any message to star it, so you can easily find it later.</p>\r\n        </div>\r\n        <!-- empty chats section end-->\r\n\r\n        <div class=\"listingContainer fullHeight\">\r\n          <div class=\"chatListContainer noHorizontalPadding\">\r\n            <ng-container *ngFor=\"let group of AllGroups\">\r\n              <div class=\"chatsCardContainer hand\" (click)=\"setActiveChat(group)\">\r\n                <div class=\"chatsCardLeft\">\r\n                  <div class=\"chatsNameWrap\">\r\n                    <p class=\"chatName text-capitalize\">{{group.chatTitle}}</p>\r\n                    <span class=\"unreadBadge\" *ngIf=\"group.unReadCount\"> {{group.unReadCount}}</span>\r\n                  </div>\r\n                  <p class=\"misreadMsg\" *ngIf=\"group.userTyping\">{{group?.userTypingContent}}</p>\r\n\r\n                  <p class=\"misreadMsg text-capitalize\" *ngIf=\"!group.userTyping\"\r\n                    [ngClass]=\"group.unReadCount ? 'misreadMsg':'readMsg'\">\r\n                    {{ getLastMessage(group) }}\r\n                  </p>\r\n\r\n                </div>\r\n                <div class=\"chatsCardRight mr-1\">\r\n                  <div class=\"dropdown mt-1\" style=\"align-self: flex-end\">\r\n                    <img src=\"./assets/images/more.png\" class=\"moreIcon\" />\r\n                    <div class=\"dropdown-content\">\r\n                      <a class=\"edit\" (click)=\"openModal(group)\">EDIT GROUP NAME</a>\r\n                      <a class=\"delete\" (click)=\"deleteGroup(group)\">DELETE</a>\r\n                    </div>\r\n                  </div>\r\n                  <p [ngClass]=\"group.Online ? 'cardOnlineStatus' :'cardOfflineStatus'\" *ngIf=\"group.auto_created\">\r\n                    {{ group.Online ? 'Online' :'Offline'}}\r\n                  </p>\r\n                  <p class=\"cardOnlineStatus\" *ngIf=\"!group.auto_created\">\r\n                    {{ group.onlineParticipants + '/' + group.TotalParticipants }} Online\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"threadType === 'GROUP'\">\r\n        <add-group (setActiveChat)=\"setchat($event)\" (changeEvent)=\"changeSidebar($event)\"></add-group>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"threadType === 'CHAT'\">\r\n        <new-chat (setActiveChat)=\"setchat($event)\" (changeEvent)=\"changeSidebar($event)\"></new-chat>\r\n      </ng-container>\r\n\r\n\r\n    </div>\r\n    <div class=\"leftSideFooter\">\r\n      <div class=\"logoutContainer\" (click)=\"logout()\">\r\n        <img src=\"./assets/images/log-out.png\" class=\"logoutLogo\" />\r\n        <span class=\"logoutText\">LOG OUT {{currentUserData.full_name}} </span>\r\n        <span class=\"ml-1\" [ngClass]=\"sdkconnected ? 'online' :'offline' \"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-sm-8 rightSide\" [hidden]=\"isHideChatScreen()\">\r\n    <div class=\"rightSideHeader alignBottom chatholder\">\r\n      <div class=\"d-flex\">\r\n        <div style=\"display: flex; flex-direction: row; align-items: center\">\r\n          <div style=\"display: flex; flex-direction: column; \">\r\n            <img\r\n              src=\"./assets/images/arrow-left.png\"\r\n              class=\"arrowLeft hand\"\r\n              (click)=\"backScreen()\"\r\n              *ngIf=\"isMobile()\"\r\n            />\r\n            <p\r\n              id=\"roomNameText\"\r\n              class=\"roomNameText text-capitalize\"\r\n              *ngIf=\"activeChat.chatTitle\"\r\n            >\r\n              {{ activeChat.chatTitle }}\r\n            </p>\r\n            <button style=\"display: none; align-items: center;height: 30px; margin: auto;\" class=\"btn btn-success\" id=\"returnedtocall\" (click)=\"returntoCall()\">\r\n              <p style=\"margin: 0px; padding: 0px; border: 0;\">return to Call</p>\r\n            </button>\r\n            <ng-container *ngFor=\"let group of AllGroups\">\r\n              <span class=\"misreadMsg\" *ngIf=\"group.userTyping && group.chatTitle == activeChat.chatTitle\">{{group?.userTypingContent}}</span>   <!--  typing... -->\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n        <div *ngIf=\"calling.templateName =='noCall'\">\r\n          <button type=\"submit\" class=\"btn callButton mr-1\" (click)=\"startAudioCall()\">\r\n            <img src=\"./assets/images/call.png\" class=\"callIcon\" />\r\n          </button>\r\n          <button type=\"submit\" class=\"btn broadcastButton\" (click)=\"startVideoCall()\">\r\n            <img src=\"./assets/images/video-call.png\" class=\"callIcon\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- right side starts -->\r\n    <div id=\"messagesBox\" class=\"messagesBox\" [ngClass]=\"calling.templateName == 'noCall' ? 'messagesBox' :''\"\r\n      *ngIf=\"isShowOne2oneCall()\">\r\n      <div  [ngClass]=\"calling.templateName == 'noCall' ? '' :'callContainer oncall' \">\r\n          <div style=\"pointer-events: none;\" class=\"IncommingVideo VideoCallBlock\"  [hidden]=\"isShowRemoteVideo()\"\r\n            [ngClass]=\"isShowRemoteVideo() ? 'IncommingVideo VideoCallBlock' : ''\">\r\n            <video class=\"IncommingVideo\" id=\"remoteVideo\" muted style=\"object-fit: fill;position:absolute;left:0;\" autoplay poster=\"./assets/images/vidd.mp4\">\r\n              <source src=\"\" type=\"video/mp4\" />\r\n            </video>\r\n          </div>\r\n          <div id=\"OutgoingVideo\" class=\"OutgoingVideo VideoCallBlock\" [hidden]=\"isHideLocalVideo()\">\r\n            <video class=\"w-100\" draggable=\"true\" id=\"localVideo\" muted style=\"object-fit: fill\" autoplay>\r\n              <source src=\"\" type=\"video/mp4\" />\r\n            </video>\r\n          </div>\r\n        <ng-container [ngTemplateOutlet]=\"selectedTemplate\" *ngIf=\"isShowOne2oneCall()\"></ng-container>\r\n      </div>\r\n    </div>\r\n\r\n    <ng-container [ngTemplateOutlet]=\"selectedTemplate\" *ngIf=\"isShowM2MCall()\"></ng-container>\r\n    <ng-container [ngTemplateOutlet]=\"chatDuringCall\" *ngIf=\"chatDCall()\"></ng-container>\r\n    \r\n\r\n    <div id=\"sendInputContainer\" class=\"sendInputContainer\" [hidden]=\"!activeChat.chatTitle || calling.templateName != 'noCall'\">\r\n      <div class=\"sendInputWrapper\">\r\n        <ng-container *ngIf=\"fileToSend\">\r\n          <div class=\"w-100\">\r\n            <img src=\"./assets/images/Document.png\" class=\"attachmentItemIcon ml-4\" />\r\n            <span class=\"ml-2\">{{fileToSend.name}}</span>\r\n            <span class=\"font-weight-bolder hand ml-2 text-danger\" (click)=\"removeAttachment()\">X</span>\r\n          </div>\r\n        </ng-container>\r\n\r\n        <input #messageInputElement type=\"text\" class=\"form-control\" placeholder=\"Type to reply..\"\r\n          (keyup)=\"typingmessage($event)\" [(ngModel)]=\"message\" *ngIf=\"!fileToSend\" />\r\n\r\n        <div class=\"sendInputButtonContainer dropup \" style=\"border-right: 1px solid #ebedf4\">\r\n          <img src=\"./assets/images/attachment.png\" data-toggle=\"dropdown\" class=\"sendIcon dropdown-toggle\" />\r\n          <div class=\"attachmentpopup dropdown-menu dropdown-menu-right selectOptionContainer\">\r\n            <div class=\"attachmentPopHeader mx-3\">\r\n              <p class=\"attachmentHeading\">ADD ATTACHMENT</p>\r\n              <p class=\"attachmentHeading\">X</p>\r\n            </div>\r\n            <div class=\"attachmentPopContent\" (click)=\"fileuploader.click()\">\r\n              <div class=\"attachmentTool\">\r\n                <div class=\"attachmentToolIcon\">\r\n                  <img src=\"./assets/images/Document.png\" class=\"attachmentItemIcon\" />\r\n                </div>\r\n                <input #fileuploader class=\"d-none\" type=\"file\" id=\"fileinput\"\r\n                  (change)=\"handleFileInput($event.target.files)\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"sendInputButtonContainer\" (click)=\"sendTextMessage()\">\r\n          <img src=\"./assets/images/send.png\" class=\"sendIcon\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- The Modal -->\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"popupimagesrc\">\r\n  <span class=\"close\" (click)=\"closeImage()\">&times;</span>\r\n  <img class=\"modal-content\" id=\"img01\" [src]=\"popupimagesrc | safeUrl\">\r\n</div>\r\n\r\n<div id=\"myModal\" class=\"modal\" *ngIf=\"editGroupModel\">\r\n  <div class=\"createChatPopup \">\r\n    <div class=\"chatPopupContent groupPopup\">\r\n      <div class=\"modalHeader\">\r\n        <p class=\"modalHeading\">Edit group </p>\r\n        <img src=\"./assets/images/cross.png\" class=\"modalCross hand\" (click)=\"closeModal()\" />\r\n      </div>\r\n      <div class=\" modalContent\">\r\n        <form [formGroup]=\"groupForm\" class=\"w-100\" (submit)=\"editGroup()\">\r\n          <p class=\"modalContentHeading\">Name your group </p>\r\n          <input type=\"text\" class=\"form-control\" placeholder=\"ex: Deeper team\" formControlName=\"group_title\" />\r\n          <form-errors [control]=\"groupForm.get('group_title')\"></form-errors>\r\n        </form>\r\n      </div>\r\n      <button type=\"submit\" class=\"btn doneButton mt-3\" (click)=\"editGroup()\" [disabled]=\"loading\">\r\n        DONE\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<ng-template #noCall>\r\n  <ng-container *ngIf=\"activeChat.chatTitle\">\r\n    <ng-container *ngFor=\"let chat of activeChat['chatHistory']\">\r\n      <div [ngClass]=\"chat.from == currentUserName ? 'senderChatContainer' :'receiverChatContainer'\">\r\n\r\n        <h4 class=\"msgBy text-capitalize\" *ngIf=\"chat.from != currentUserName\">{{chat.messageBy}}</h4>\r\n        <!-- first messgae from same person -->\r\n        <div class=\"bubbleContainer\">\r\n\r\n          <div class=\"bubble\" *ngIf=\"chat.type =='text'\">\r\n            <p class=\"msgText\">{{chat.content}}</p>\r\n          </div>\r\n\r\n          <div class=\"imgbubble\" *ngIf=\"chat.type =='image'\">\r\n            <mat-spinner [diameter]=\"30\" *ngIf=\"!chat.content\"></mat-spinner>\r\n            <img [src]=\"chat.content | safeUrl\" class=\"w-100 msgImage img-thumbnail img-fluid\"\r\n              (click)=\"openImage(chat.content)\" />\r\n          </div>\r\n\r\n          <div class=\"imgbubble file-attachment\" *ngIf=\"chat.type !='text' && chat.type !='image'\">\r\n            <mat-spinner [diameter]=\"30\" *ngIf=\"!chat.content\"></mat-spinner>\r\n            <ng-container *ngIf=\"chat.content\">\r\n              <img [src]=\"checkFileType(chat.content)\" class=\"w-100 msgImage thumbnail img-fluid\" />\r\n              <a [href]=\"chat.content | safeUrl\" download>Download</a>\r\n            </ng-container>\r\n          </div>\r\n\r\n          <span class=\"time\">\r\n            <ng-container *ngIf=\"chat.readCount && chat.from == currentUserName\">\r\n              Read\r\n              <br />\r\n            </ng-container>\r\n            <span> {{chat.date | date:\"shortTime\"}}</span>\r\n          </span>\r\n        </div>\r\n\r\n      </div>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <div class=\"chatRoomContainer\" *ngIf=\"!activeChat.chatTitle && !loading\">\r\n    <div style=\"height: 100%;\" class=\"listingContainer\">\r\n      <!-- empty list container start -->\r\n      <div class=\"emptyListContainer\">\r\n        <div class=\"emptyListTop\">\r\n          <div></div>\r\n          <img src=\"./assets/images/shipping.png\" class=\"shippingIcon\" />\r\n          <div class=\"noConvoTextWrapper\">\r\n            <p class=\"noConvoText\">No Conversation Yet</p>\r\n            <p style=\"max-width: 200px;\" class=\"noConvoSub\">\r\n              Tap and hold on any message to star it, so you can easily find\r\n              it later.\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div class=\"emptyListBottom\">\r\n          <button type=\"submit\" class=\"btn newChatButton\" (click)=\"newChat()\">\r\n            NEW CHAT\r\n          </button>\r\n          <button type=\"submit\" class=\"btn refreshButton\" (click)=\"getAllGroups()\">\r\n            REFRESH\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- empty list container end -->\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #incommingAudioCall>\r\n  <p class=\"callContainerStatus\">Incoming Call</p>\r\n  <p class=\"callerName text-capitalize\">{{ calling['callerName'] }}</p>\r\n  <audio id=\"Incomingaudio\" autoplay src=\"./assets/images/calling_you.mp3\" preload=\"auto\"></audio>\r\n  <img src=\"./assets/images/audio.png\" class=\"audioIcon\" />\r\n  <div style=\"width: 150px\" class=\"callButtonsContainer\">\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/Accept-button.png\" class=\"responseButtonImg\" (click)=\"acceptcall()\" />\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #outgoingAudioCall>\r\n  <p class=\"callContainerStatus\">Calling</p>\r\n  <p class=\"callerName text-capitalize\">{{ calling['callerName'] }}</p>\r\n  <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n  <div style=\"width: 150px\" class=\"callButtonsContainer\">\r\n    <!-- <img src=\"./assets/images/video-call-off.png\" class=\"responseButtonImg\" /> -->\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #AudioCallInProgress>\r\n  <p class=\"settingsIcon callContainerStatus white m-3\">{{ callTime | formatTime }}</p>\r\n  <p class=\"callerName text-capitalize\">{{ calling['callerName'] }}</p>\r\n  <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n  <div style=\"width: 150px\" class=\"callButtonsContainer\">\r\n    <!-- <img src=\"./assets/images/video-call-off.png\" class=\"responseButtonImg\" /> -->\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #incommingVideoCall>\r\n  <audio id=\"audiotag1\" autoplay src=\"./assets/images/calling_you.mp3\" preload=\"auto\"></audio>\r\n  <p class=\"callContainerStatus\">Incoming Call</p>\r\n  <p class=\"callerName text-capitalize\">{{ calling['callerName'] }}</p>\r\n  <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n  <div style=\"width:140px\" class=\"callButtonsContainer\">\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/Accept-button.png\" class=\"responseButtonImg\" (click)=\"acceptcall()\" />\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #outgoingVideoCall>\r\n  <p class=\"callContainerStatus\">Calling </p>\r\n  <p class=\"callerName text-capitalize\">{{ calling['callerName'] }}</p>\r\n  <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n  <div style=\"width: 200px\" class=\"callButtonsContainer\">\r\n    <img src=\"./assets/images/video-call-{{settings.isOnInProgressCamara ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressCamara')\" />\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/microphone-{{settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #VideoCallInProgress>\r\n  <p class=\"settingsIcon callContainerStatus white m-3\">{{ callTime | formatTime }}</p>\r\n  <p class=\"callerName text-capitalize\" id=\"callerHolder\">{{ calling['callerName'] }}</p>\r\n  <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n  <div style=\"width: 200px\" class=\"callButtonsContainer\">\r\n    <img src=\"./assets/images/video-call-{{ settings.isOnInProgressCamara ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressCamara')\" />\r\n    <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n    <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n      class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n      <img (click)=\"setChatDuringCall()\" style=\"z-index: 10000;cursor:pointer\" src=\"./assets/images/chat1.png\" class=\"callicon\" />\r\n\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #groupIncommingAudioCall>\r\n  <div class=\"messagesBox\" id=\"messagesBox\">\r\n    <div class=\"callContainer\">\r\n      <audio id=\"audiotag1\" autoplay src=\"./assets/images/calling_you.mp3\" preload=\"auto\"></audio>\r\n      <p class=\"callContainerStatus\">Incomming Call From</p>\r\n      <p class=\"callerName text-capitalize\">{{ calling.callerName }} </p>\r\n      <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n      <div style=\"width: 200px;\" class=\"callButtonsContainer\">\r\n        <img src=\"./assets/images/Accept-button.png\" class=\"responseButtonImg\" (click)=\"acceptcall()\" />\r\n        <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n        <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n          class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n        <!-- <img src=\"./assets/images/speaker-on.png\" class=\"responseButtonImg\" /> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #groupOutgoingAudioCall>\r\n  <div class=\"messagesBox\" id=\"messagesBox\">\r\n    <div class=\"callContainer\">\r\n      <p class=\"callContainerStatus\">Calling</p>\r\n      <p class=\"callerName text-capitalize\">{{ calling.callerName }} </p>\r\n      <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n      <div style=\"width: 150px;\" class=\"callButtonsContainer\">\r\n        <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n        <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n          class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n        <!-- <img src=\"./assets/images/speaker-on.png\" class=\"responseButtonImg\" /> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #groupOngoingAudioCall>\r\n  <div style=\"border-radius: 0px\" class=\"messagesBox noPadding\" >\r\n    <p class=\"settingsIcon callContainerStatus white m-3\">{{ callTime | formatTime }}</p>\r\n    <div class=\"groupCallContainer\">\r\n      <div class=\"upperVideoContainer\">\r\n        <div class=\"singleParticipantContainer\" *ngFor=\"let user of calling.participant\">\r\n          <div class=\"singleInner\">\r\n            <img src=\"./assets/images/blue-avatar.png\" class=\"singleInnAvatar\" />\r\n            <p class=\"innerCallerName text-capitalize\">{{ user.full_name }}</p>\r\n            <audio [id]=\"user.ref_id\" autoplay style=\"object-fit: cover\" autoplay>\r\n              />\r\n            </audio>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div class=\"bottomVideoContainer\">\r\n        <div class=\"localVideoContainer\">\r\n          <div class=\"singleInner\">\r\n            <img src=\"./assets/images/blue-avatar.png\" class=\"singleInnAvatar\" />\r\n            <p class=\"innerCallerName text-capitalize\">{{ currentUserData.full_name }}</p>\r\n            <audio id=\"localAudio\" autoplay style=\"object-fit: cover\" autoplay>\r\n              />\r\n            </audio>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"groupCallControllContainer\">\r\n          <div style=\"width: 150px;\" class=\"callButtonsContainer\">\r\n            <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n            <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n              class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n            <!-- <img src=\"./assets/images/speaker-on.png\" class=\"responseButtonImg\" /> -->\r\n            <img (click)=\"setChatDuringCall()\" style=\"z-index: 10000;cursor: pointer;\" src=\"./assets/images/chat1.png\" class=\"callicon\" />\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<!-- video call -->\r\n\r\n<ng-template #groupIncommingVideoCall>\r\n  <div class=\"messagesBox\" id=\"messagesBox\">\r\n    <div class=\"callContainer\">\r\n      <audio id=\"audiotag1\" autoplay src=\"./assets/images/calling_you.mp3\" preload=\"auto\"></audio>\r\n      <p class=\"callContainerStatus\">Incomming Call From</p>\r\n      <p class=\"callerName text-capitalize\">{{ calling.callerName }}</p>\r\n      <img src=\"./assets/images/blue-avatar.png\" class=\"avatarIcon\" />\r\n      <div style=\"width: 200px;\" class=\"callButtonsContainer\">\r\n        <img src=\"./assets/images/Accept-button.png\" class=\"responseButtonImg\" (click)=\"acceptcall()\" />\r\n        <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n        <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n          class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n        <!-- <img src=\"./assets/images/speaker-on.png\" class=\"responseButtonImg\" /> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #chatDuringCall >\r\n  <div id=\"appendChatDuringCall\">\r\n    <ng-container *ngIf=\"activeChat.chatTitle\">\r\n      <ng-container *ngFor=\"let chat of activeChat['chatHistory']\">\r\n        <div [ngClass]=\"chat.from == currentUserName ? 'senderChatContainer' :'receiverChatContainer'\">\r\n  \r\n          <h4 class=\"msgBy text-capitalize\" *ngIf=\"chat.from != currentUserName\">{{chat.messageBy}}</h4>\r\n          <!-- first messgae from same person -->\r\n          <div class=\"bubbleContainer\">\r\n  \r\n            <div class=\"bubble\" *ngIf=\"chat.type =='text'\">\r\n              <p class=\"msgText\">{{chat.content}}</p>\r\n            </div>\r\n  \r\n            <div class=\"imgbubble\" *ngIf=\"chat.type =='image'\">\r\n              <mat-spinner [diameter]=\"30\" *ngIf=\"!chat.content\"></mat-spinner>\r\n              <img [src]=\"chat.content | safeUrl\" class=\"w-100 msgImage img-thumbnail img-fluid\"\r\n                (click)=\"openImage(chat.content)\" />\r\n            </div>\r\n  \r\n            <div class=\"imgbubble file-attachment\" *ngIf=\"chat.type !='text' && chat.type !='image'\">\r\n              <mat-spinner [diameter]=\"30\" *ngIf=\"!chat.content\"></mat-spinner>\r\n              <ng-container *ngIf=\"chat.content\">\r\n                <img [src]=\"checkFileType(chat.content)\" class=\"w-100 msgImage thumbnail img-fluid\" />\r\n                <a [href]=\"chat.content | safeUrl\" download>Download</a>\r\n              </ng-container>\r\n            </div>\r\n  \r\n            <span class=\"time\">\r\n              <ng-container *ngIf=\"chat.readCount && chat.from == currentUserName\">\r\n                Read\r\n                <br />\r\n              </ng-container>\r\n              <span> {{chat.date | date:\"shortTime\"}}</span>\r\n            </span>\r\n          </div>\r\n  \r\n        </div>\r\n      </ng-container>\r\n    </ng-container>\r\n  \r\n    <div class=\"chatRoomContainer\" *ngIf=\"!activeChat.chatTitle && !loading\">\r\n      <div style=\"height: 100%;\" class=\"listingContainer\">\r\n        <!-- empty list container start -->\r\n        <div class=\"emptyListContainer\">\r\n          <div class=\"emptyListTop\">\r\n            <div></div>\r\n            <img src=\"./assets/images/shipping.png\" class=\"shippingIcon\" />\r\n            <div class=\"noConvoTextWrapper\">\r\n              <p class=\"noConvoText\">No Conversation Yet</p>\r\n              <p style=\"max-width: 200px;\" class=\"noConvoSub\">\r\n                Tap and hold on any message to star it, so you can easily find\r\n                it later.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div class=\"emptyListBottom\">\r\n            <button type=\"submit\" class=\"btn newChatButton\" (click)=\"newChat()\">\r\n              NEW CHAT\r\n            </button>\r\n            <button type=\"submit\" class=\"btn refreshButton\" (click)=\"getAllGroups()\">\r\n              REFRESH\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <!-- empty list container end -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n\r\n<ng-template #groupVideoCall>\r\n  <div id=\"messagesBox\" style=\"border-radius: 0px;\" class=\"messagesBox noPadding\">\r\n    <p class=\"settingsIcon callContainerStatus white m-3\">{{ callTime | formatTime }}</p>\r\n    <div id=\"groupCallContainer\" class=\"groupCallContainer\" [ngClass]=\"groupOutgoingVideoCall ? 'noCallBackground' : ''\">\r\n\r\n      \r\n\r\n      <div class=\"upperVideoContainer\">\r\n\r\n        <div class=\"conditionalName\" *ngIf=\"groupOutgoingVideoCall\">\r\n          <p class=\"callContainerStatus\">Calling</p>\r\n          <p class=\"callerName text-capitalize\">{{ calling.callerName }}</p>\r\n        </div>\r\n\r\n        <!-- during call top view start-->\r\n        <div class=\"singleParticipantContainer\" *ngFor=\"let user of calling.participant\">\r\n          <div class=\"singleInner\">\r\n            <div class=\"groupVideoCallWrapper groupVideoCallWrapperBlock\">\r\n              <video [id]=\"user.ref_id\" autoplay muted style=\"object-fit: contain; height: 100%;\r\n              width: 100%;\" autoplay>\r\n                <source src=\"\" type=\"video/mp4\" />\r\n              </video>\r\n            </div>\r\n            <img src=\"./assets/images/blue-avatar.png\" class=\"singleInnAvatar\" />\r\n            <p class=\"innerCallerName\">{{ user.full_name }}</p>\r\n          </div>\r\n        </div>\r\n        <!-- during call top view end-->\r\n      </div>\r\n      <div class=\"bottomVideoContainer \" [ngClass]=\"groupOutgoingVideoCall ? 'noCallBackground' : ''\">\r\n        <div class=\"localVideoContainer\">\r\n          <div style=\"margin-bottom: 50px\" class=\"singleInner\">\r\n            <!-- if video got sorce it will automatically view on top of name and avatar -->\r\n            <div class=\"groupVideoCallWrapperBlock\"\r\n              [ngClass]=\"groupOutgoingVideoCall ? 'groupVideoCallWrapper_noCall ' : 'groupVideoCallWrapper_Call'\">\r\n              <video id=\"localVideo\" style=\"object-fit: cover; width: 100%;\" autoplay muted autoplay>\r\n                <source src=\"\" type=\"video/mp4\" />\r\n              </video>\r\n            </div>\r\n\r\n            <div class=\"singleInner\" id=\"localNameHolder\">\r\n              <img src=\"./assets/images/blue-avatar.png\" class=\"singleInnAvatar\" />\r\n              <p class=\"innerCallerName text-capitalize\">{{ currentUserData.full_name }}</p>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"groupCallControllContainer\">\r\n          <div style=\"width: 200px;\" class=\"callButtonsContainer\">\r\n            <img src=\"./assets/images/video-call-{{ settings.isOnInProgressCamara ? 'on.png' :'off.png'}}\"\r\n              class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressCamara')\" />\r\n            <img src=\"./assets/images/decline-button.png\" class=\"responseButtonImg\" (click)=\"stopCall()\" />\r\n            <img src=\"./assets/images/microphone-{{ settings.isOnInProgressMicrophone ? 'on.png' :'off.png'}}\"\r\n              class=\"responseButtonImg\" (click)=\"changeSettings('isOnInProgressMicrophone')\" />\r\n            <!-- <img src=\"./assets/images/speaker-on.png\" class=\"responseButtonImg\" /> -->\r\n            <img (click)=\"setChatDuringCall()\" style=\"z-index: 10000; cursor: pointer;\" src=\"./assets/images/chat1.png\" class=\"callicon\" />\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>","import { Component, ElementRef, EventEmitter, OnInit, Output, ViewChild } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { fromEvent } from 'rxjs/internal/observable/fromEvent';\r\nimport { debounceTime } from 'rxjs/internal/operators/debounceTime';\r\nimport { distinctUntilChanged } from 'rxjs/internal/operators/distinctUntilChanged';\r\nimport { map } from 'rxjs/internal/operators/map';\r\nimport { mergeMap } from 'rxjs/internal/operators/mergeMap';\r\nimport { BaseService } from 'src/app/shared/services/base.service';\r\nimport { PubsubService } from 'src/app/shared/services/pubsub.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { startWith } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\nimport {ChatComponent} from '../chat.component';\r\n\r\n@Component({\r\n  selector: 'new-chat',\r\n  templateUrl: './new-chat.component.html',\r\n  styleUrls: ['./new-chat.component.scss']\r\n})\r\nexport class NewChatComponent implements OnInit {\r\n  loading = true;\r\n  AllUsers = [];\r\n  CopyAllUsers = [];\r\n  @Output() changeEvent = new EventEmitter<string>();\r\n  @ViewChild('searchInput') searchInput: ElementRef;\r\n  @Output() setActiveChat = new EventEmitter<string>();\r\n\r\n\r\n  constructor(\r\n    public pubsubService: PubsubService,\r\n    private svc: BaseService,\r\n    public dialog: MatDialog,\r\n    private toastr: ToastrService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    \r\n    if (this.searchInput) {\r\n      fromEvent(this.searchInput.nativeElement, 'input')\r\n        .pipe(\r\n          map((event: Event) => (event.target as HTMLInputElement).value),\r\n          debounceTime(1000),\r\n          distinctUntilChanged(),\r\n          startWith(''),\r\n          mergeMap(value => {\r\n            this.loading = true;\r\n            if (!value) {\r\n              const data = {\r\n                sorting: \"ORDER BY full_name ASC\",\r\n                search_field: \"full_name\",\r\n                search_value: '',\r\n                condition: \"contains\",\r\n              }\r\n              return this.svc.post('AllUsers', data).pipe(map(res => {\r\n                if(!(res.users && res.users.length))\r\n                {\r\n                  res.users = [];\r\n                }\r\n                this.CopyAllUsers = [...res.users];\r\n                return res;\r\n              }))\r\n            }\r\n            const temparaay = [...this.CopyAllUsers];\r\n            const filteruser = temparaay.filter(user => {\r\n              let searchValue = value.toLowerCase();\r\n              if (user.full_name.toLowerCase().startsWith(searchValue)) { return -1; }\r\n            });\r\n            const returnData = {\r\n              users: filteruser\r\n            }\r\n            return of(returnData)\r\n          })\r\n        )\r\n        .subscribe(res => {\r\n          this.loading = false;\r\n          if (!res.users || !res.users.length) {\r\n            this.toastr.error(\"No contacts found\", \"Opps!\");\r\n            this.AllUsers = [];\r\n          } else {\r\n            this.AllUsers = res.users;\r\n          }\r\n        })\r\n    }\r\n  }\r\n\r\n\r\n  backScreen() {\r\n    this.changeEvent.emit(\"THREAD\");\r\n  }\r\n\r\n  addGroupEvent() {\r\n    this.changeEvent.emit(\"GROUP\");\r\n  }\r\n\r\n  startChat(user , val ) {\r\n    if (this.loading) return;\r\n    this.loading = true;\r\n    let data = {\r\n      group_title: user.full_name,\r\n      participants: [user.user_id],\r\n      auto_created: 1\r\n    }\r\n    this.svc.post('CreateGroup', data).subscribe(v => {\r\n      if (v && v.status == 200) {\r\n        let subscribedata = {\r\n          ...v.group,\r\n          key: v.group['channel_key'],\r\n          channel: v.group['channel_name'],\r\n        };\r\n        let data = [];\r\n        data.push(subscribedata)\r\n        this.pubsubService.subscribeToChat(data);\r\n        this.changeEvent.emit(\"THREAD\");\r\n        v.group.clicked_item = val;\r\n        this.setActiveChat.emit(v.group);\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n  \r\n\r\n}\r\n","<div class=\"newChatHeader\">\r\n  <div class=\"newChatLeft hand\">\r\n    <img src=\"./assets/images/arrow-left.png\" class=\"arrowLeft\" (click)=\"backScreen()\" />\r\n    <p class=\"newChatHeading\">New Chat</p>\r\n  </div>\r\n  <div class=\"newChatRight hand\">\r\n    <img class=\"goodMark\" src=\"./assets/images/checkmark.png\" />\r\n  </div>\r\n</div>\r\n<div class=\"newChatSearchBox\">\r\n  <div class=\"input-group\">\r\n    <div class=\"input-group-prepend\">\r\n      <img src=\"./assets/images/search.png\" class=\"seacrchIcon\" />\r\n    </div>\r\n    <input type=\"text\" class=\"form-control\" placeholder=\"Search\" #searchInput />\r\n  </div>\r\n</div>\r\n<div class=\"addGrpChat\">\r\n  <div class=\"addGrpChatTop hand\" (click)=\"addGroupEvent()\">\r\n    <img src=\"./assets/images/Group Chat.png\" class=\"addgrpIcon\" />\r\n    <p class=\"addGrpTitle\">Add Group Chat</p>\r\n  </div>\r\n  <div class=\"addGrpSep\"></div>\r\n  <!-- <div class=\"addGrpSub\"> -->\r\n  <p class=\"cntct\">Contacts</p>\r\n  <!-- </div> -->\r\n</div>\r\n<div class=\"contactListContainer max-height\">\r\n\r\n  <ng-container *ngFor=\"let user of AllUsers\">\r\n    <div class=\"contactListCard hand\">\r\n      <div class=\"contactListCardLeft\">\r\n        <img src=\"./assets/images/user.png\" class=\"ListCardIcon\" />\r\n        <p class=\"ListCardName text-capitalize pb-1\">{{user.full_name}}</p>\r\n      </div>\r\n      <div class=\"iconsdiv contactListCardRight justify-content-end pl-1\">\r\n        <div class=\"videoicon\">\r\n          <img (click)=\"startChat(user , 'video')\" src=\"./assets/images/video-call.png\" class=\" pl-1 ListCardButton hand\" />\r\n        </div>\r\n        <div class=\"audioicon contactListCardRight justify-content-end pl-1\">\r\n          <img (click)=\"startChat(user , 'audio')\" src=\"./assets/images/call.png\" class=\" pl-1 ListCardButton hand\" />\r\n        </div>\r\n        <div class=\"contactListCardRight justify-content-end pl-1\">\r\n          <img (click)=\"startChat(user , 'chat')\" src=\"./assets/images/chat.png\" class=\" pl-1 ListCardButton hand\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n</div>","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from \"@angular/router\";\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\nimport FormsHandler from '../../shared/FormsHandler/FormsHandler';\r\nimport { AuthService } from '../../shared/auth/auth.service';\r\n\r\n@Component({\r\n  selector: 'ngx-login',\r\n  templateUrl: './login.component.html',\r\n  styleUrls: ['./login.component.scss']\r\n})\r\nexport class LoginComponent implements OnInit, OnDestroy {\r\n\r\n  loginForm: FormGroup;\r\n  loading: boolean = false;\r\n  formError: string = '';\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _fb: FormBuilder,\r\n    public auth: AuthService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.auth.islogin()) {\r\n      this.router.navigate(['chat']);\r\n    }\r\n    this.buildForm();\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter') {\r\n        this.onLogin();\r\n      }\r\n    });\r\n  }\r\n\r\n  buildForm() {\r\n    this.loginForm = this._fb.group({\r\n      'email': new FormControl('', [Validators.required, Validators.minLength(4), Validators.maxLength(50)]),\r\n      'password': new FormControl(null, [Validators.required, Validators.minLength(8), Validators.maxLength(14)])\r\n    }, { updateOn: 'change' });\r\n  }\r\n\r\n  onLogin() {\r\n    FormsHandler.validateForm(this.loginForm);\r\n    if (this.loginForm.invalid) return;\r\n    const saveData = this.loginForm.value;\r\n    saveData.project_id = '143LV8M8';\r\n    this.loading = true;\r\n    this.formError = null;\r\n    this.auth.login(saveData).subscribe(v => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        StorageService.setUserData(v);\r\n        StorageService.setAuthToken(v.auth_token);\r\n        StorageService.setAuthUsername(v.ref_id);\r\n        this.router.navigate(['chat']);\r\n        this.loginForm.reset();\r\n      } else {\r\n        this.formError = v.message;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.loginForm.reset();\r\n  }\r\n\r\n}\r\n","<div class=\"containerWrapper\">\r\n  <img src=\"./assets/images/logo2.png\" class=\"logo\" />\r\n  <div class=\"innerWrapper\">\r\n    <h6 class=\"wrapperHeading\">Sign In</h6>\r\n    <p class=\"text-danger text-capitalize\">{{formError}}</p>\r\n    <div class=\"inputsContainer form-group\">\r\n      <form [formGroup]=\"loginForm\" class=\"w-100\" (submit)=\"onLogin()\">\r\n        <input type=\"email\" class=\"form-control\" placeholder=\"Email/Username\" formControlName=\"email\" />\r\n        <form-errors [control]=\"loginForm.get('username')\"></form-errors>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Password\" formControlName=\"password\" />\r\n        <form-errors [control]=\"loginForm.get('password')\"></form-errors>\r\n      </form>\r\n    </div>\r\n    <div class=\"buttonsContainer\">\r\n      <button type=\"submit\" class=\"signButton\" (click)=\"onLogin()\" [disabled]=\"loading\">SIGN IN</button>\r\n      <h5 class=\"bottomLink\"><a routerLink=\"/signup\">SIGN UP</a></h5>\r\n      <p class=\"text-muted\">Version:2</p>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\r\nimport { Router } from \"@angular/router\";\r\nimport FormsHandler from '../../shared/FormsHandler/FormsHandler';\r\nimport { AuthService } from '../../shared/auth/auth.service';\r\nimport { ValidationService } from 'src/app/shared/validators';\r\nimport { StorageService } from 'src/app/shared/services/storage.service';\r\n\r\n@Component({\r\n  selector: 'sign-up',\r\n  templateUrl: './sign-up.component.html',\r\n  styleUrls: ['./sign-up.component.scss']\r\n})\r\nexport class SignUpComponent implements OnInit {\r\n\r\n  loginForm: FormGroup;\r\n  loading = false;\r\n  formError;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _fb: FormBuilder,\r\n    public auth: AuthService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.buildForm();\r\n    document.addEventListener(\"keyup\", event => {\r\n      if (event.code === 'Enter') {\r\n        this.onLogin();\r\n      }\r\n    });\r\n  }\r\n\r\n  buildForm() {\r\n    this.loginForm = this._fb.group({\r\n      'full_name': new FormControl('', [Validators.required, ValidationService.usernameValidator, Validators.minLength(4), Validators.maxLength(50)]),\r\n      'device_type': new FormControl('web', [Validators.required]),\r\n      'device_model': new FormControl('web', [Validators.required]),\r\n      'device_os_ver': new FormControl(navigator.platform, [Validators.required]),\r\n      'email': new FormControl(null, [ValidationService.emailValidator, Validators.required]),\r\n      'password': new FormControl(null, [Validators.required])\r\n    }, { updateOn: 'change' });\r\n    console.log('this.signupForm', this.loginForm);\r\n  }\r\n\r\n  onLogin() {\r\n    FormsHandler.validateForm(this.loginForm);\r\n    if (this.loginForm.invalid) return;\r\n    const saveData = this.loginForm.value;\r\n    saveData.project_id = '143LV8M8';\r\n    this.loading = true;\r\n    this.formError = null;\r\n    this.auth.signup(saveData).subscribe(v => {\r\n      this.loading = false;\r\n      if (v && v.status == 200) {\r\n        StorageService.setUserData(v);\r\n        StorageService.setAuthToken(v.auth_token);\r\n        StorageService.setAuthUsername(v.ref_id);\r\n        this.router.navigate(['chat']);\r\n        this.loginForm.reset();\r\n      } else {\r\n        this.formError = v.message;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"containerWrapper\">\r\n  <img src=\"./assets/images/logo2.png\" class=\"logo\" />\r\n  <div class=\"innerWrapper\">\r\n    <h6 class=\"wrapperHeading\">Sign Up to your account</h6>\r\n    <p class=\"text-danger text-capitalize\">{{formError }}</p>\r\n    <div class=\"inputsContainer form-group\">\r\n      <form [formGroup]=\"loginForm\" class=\"w-100\" (submit)=\"onLogin()\">\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"Your Username\" formControlName=\"full_name\" />\r\n        <form-errors [control]=\"loginForm.get('full_name')\"></form-errors>\r\n        <input type=\"email\" class=\"form-control\" placeholder=\"Your Email\" formControlName=\"email\" />\r\n        <form-errors [control]=\"loginForm.get('email')\"></form-errors>\r\n        <input type=\"password\" class=\"form-control\" placeholder=\"Your Password\" formControlName=\"password\" />\r\n        <form-errors [control]=\"loginForm.get('password')\"></form-errors>\r\n      </form>\r\n    </div>\r\n    <div class=\"buttonsContainer\">\r\n      <button type=\"submit\" class=\"signButton\" (click)=\"onLogin()\" [disabled]=\"loading\"> SIGN\r\n        UP</button>\r\n      <h5 class=\"bottomLink\"><a routerLink=\"/login\">SIGN IN</a></h5>\r\n    </div>\r\n  </div>\r\n</div>","import { FormGroup } from \"@angular/forms\";\r\n\r\nexport default class FormsHandler {\r\n\r\n    /**\r\n     * This method is use to validate Form\r\n     * @param formErrors string \r\n     * @param form  form instance | object\r\n     * @return errors as string\r\n     * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n     **/\r\n    static validateForm(form) {\r\n        if (form.valid) {\r\n            return true;\r\n        } else {\r\n            if (form.controls) {\r\n                for (const field in form.controls) {\r\n                    const control = form.get(field);\r\n                    if (control.invalid) {\r\n                        control.markAsTouched({ onlySelf: true });\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n    * this method is use to validate Form Array\r\n    * @param formErrors string \r\n    * @param form  form instance | object\r\n    * @return errors as string\r\n    * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n    **/\r\n    static validateFormArray(form) {\r\n        if (form.valid) {\r\n            return true;\r\n        } else {\r\n            if (form.controls) {\r\n                for (const group in form.controls) {\r\n                    const groupFiled = form.get(group) as FormGroup;\r\n                    for (const field in groupFiled.controls) {\r\n                        const control = groupFiled.get(field);\r\n                        if (control.invalid) {\r\n                            control.markAsTouched({ onlySelf: true });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static deleteEmptyFileds(data) {\r\n        if (data) {\r\n            for (const key in data) {\r\n                if (data[key] == '' || data[key] == null) {\r\n                    delete data[key];\r\n                }\r\n                if (data[key] && typeof data[key] === 'string') {\r\n                    data[key] = data[key].trim();\r\n                }\r\n            }\r\n            return data;\r\n        }\r\n    }\r\n\r\n}","import { Component, Input } from '@angular/core';\r\nimport { AbstractControlDirective, AbstractControl } from '@angular/forms';\r\n\r\n@Component({\r\n    selector: 'form-errors',\r\n    template: `\r\n    <p class='text-danger'>\r\n     {{hasErrors() ? listOfErrors() : ''}}\r\n    </p>`,\r\n})\r\nexport class GetErrorsComponent {\r\n\r\n    private static readonly errorMessages = {\r\n        'required': () => 'The specified information is required.',\r\n        'minlength': (params) => 'The min number of characters is ' + params.requiredLength,\r\n        'maxlength': (params) => 'The max allowed number of characters is ' + params.requiredLength,\r\n        'pattern': (params) => 'The required pattern is: ' + params.requiredPattern,\r\n        'years': (params) => params.message,\r\n        'countryCity': (params) => params.message,\r\n        'uniqueName': (params) => params.message,\r\n        'telephoneNumbers': (params) => params.message,\r\n        'telephoneNumber': (params) => params.message,\r\n        'invalidNumber': () => 'The specified information is invalid.',\r\n        'emptySpaces': () => 'The specified information is invalid.',\r\n        'email': () => 'Email is not valid',\r\n        'invalidPassword': () => 'Password must be a minimum of 8 characters and contain at least 1 uppercase character and 1 numeric value',\r\n        'invalidUsernameCharacters': () => 'invalid user name',\r\n        'invalidInputCharacters': () => 'The specified information is invalid.',\r\n        'invalidEmailAddress': () => 'Email is not valid',\r\n    };\r\n\r\n    @Input() private control: AbstractControlDirective | AbstractControl;\r\n\r\n    hasErrors(): boolean {\r\n        return this.control && this.control.errors && (this.control.dirty || this.control.touched);\r\n    }\r\n\r\n    listOfErrors() {\r\n        const errors = Object.keys(this.control.errors).map(field => this.getMessage(field, this.control.errors[field]));\r\n        return errors.length ? errors[0] : errors;\r\n    }\r\n\r\n    private getMessage(type: string, params: any) {\r\n        return GetErrorsComponent.errorMessages[type](params);\r\n    }\r\n\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\nimport { PortalModule } from '@angular/cdk/portal';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { LayoutModule } from '@angular/cdk/layout';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { PlatformModule } from '@angular/cdk/platform';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nconst globalRippleConfig: RippleGlobalOptions = { disabled: true };\r\nimport {\r\n  MAT_RIPPLE_GLOBAL_OPTIONS,\r\n  RippleGlobalOptions,\r\n  MatRippleModule,\r\n  MatNativeDateModule,\r\n} from '@angular/material/core';\r\nimport {MatProgressSpinnerModule} from '@angular/material/progress-spinner';\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatFormFieldModule,\r\n    MatRippleModule,\r\n    MatDialogModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    CdkTableModule,\r\n    DragDropModule,\r\n    PortalModule,\r\n    CommonModule,\r\n    MatSelectModule,\r\n    MatCheckboxModule,\r\n    MatInputModule,\r\n    MatRadioModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule,\r\n    MatTabsModule,\r\n    MatButtonModule,\r\n    MatTableModule,\r\n    MatSlideToggleModule,\r\n    OverlayModule,\r\n    MatTooltipModule,\r\n    MatProgressBarModule,\r\n    MatMenuModule,\r\n    MatProgressSpinnerModule\r\n  ],\r\n  declarations: [],\r\n  entryComponents: [],\r\n  providers: [\r\n    { provide: MAT_RIPPLE_GLOBAL_OPTIONS, useValue: globalRippleConfig }\r\n  ],\r\n  exports: [\r\n    MatFormFieldModule,\r\n    PlatformModule,\r\n    MatRippleModule,\r\n    MatSortModule,\r\n    MatPaginatorModule,\r\n    CdkTableModule,\r\n    DragDropModule,\r\n    OverlayModule,\r\n    PortalModule,\r\n    MatSelectModule,\r\n    MatCheckboxModule,\r\n    MatInputModule,\r\n    MatRadioModule,\r\n    MatDatepickerModule,\r\n    MatNativeDateModule,\r\n    MatTabsModule,\r\n    MatTableModule,\r\n    MatSlideToggleModule,\r\n    MatButtonModule,\r\n    MatTooltipModule,\r\n    MatProgressBarModule,\r\n    LayoutModule,\r\n    MatProgressSpinnerModule\r\n  ]\r\n})\r\nexport class AppMaterialModule { }\r\n","import { CanActivate, Router } from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\nimport { AuthService } from './auth.service';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate {\r\n  constructor(\r\n    private authService: AuthService,\r\n    protected router: Router\r\n  ) { }\r\n\r\n  canActivate() {\r\n    const isAuthenticated = this.authService.isAuthenticated();\r\n    if (!isAuthenticated) {\r\n      this.router.navigate(['login']);\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { StorageService } from '../services/storage.service';\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n  public userSubject$ = new Subject();\r\n  public currentUserReq$;\r\n  public currentUserId;\r\n  public userSubject = new ReplaySubject<any>(1);\r\n  private userRequest: Observable<any>;\r\n\r\n  constructor(\r\n    private http: HttpClient\r\n  ) { }\r\n\r\n  login(data): Observable<any> {\r\n    return this.http.post('Login', data);\r\n  }\r\n\r\n  signup(data): Observable<any> {\r\n    return this.http.post('SignUp', data);\r\n  }\r\n\r\n  logout(): void {\r\n    StorageService.clearLocalStorge();\r\n  }\r\n\r\n  getToken(): string {\r\n    return StorageService.getAuthToken()\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n\r\n  islogin(): boolean {\r\n    return !!this.getToken();\r\n  }\r\n\r\n  resetUser() {\r\n    this.currentUserId = null;\r\n    this.userRequest = null;\r\n    this.userSubject = new ReplaySubject(1);\r\n  }\r\n\r\n  getUserId() {\r\n    const userdata = StorageService.getUserData();\r\n    return userdata._id;\r\n  }\r\n\r\n  isAuthUser(): Observable<any> {\r\n    return this.http.get<any>('users/current-user');\r\n  }\r\n}\r\n","\r\nexport function isEmptyObj(obj) {\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function isEmptyArray(array) {\r\n    if (!Array.isArray(array) || !array.length) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function isEmail(email) {\r\n    const emailLowercase = email.toLowerCase();\r\n    if (email == null || emailLowercase.match(/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-zA-Z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/)) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function FindObjectByValue(inputArray: Array<any>, value: string) {\r\n    return inputArray.find(e => e == value);\r\n}\r\n\r\nexport function FindArrayObject(inputArray, key, value) {\r\n    return inputArray.find(e => e[key] == value);\r\n}\r\n\r\nexport function AutoUnsubscribe(constructor) {\r\n    const original = constructor.prototype.ngOnDestroy;\r\n    constructor.prototype.ngOnDestroy = function () {\r\n        for (const prop in this) {\r\n            if (prop) {\r\n                const property = this[prop];\r\n                if (property && (typeof property.unsubscribe === 'function')) {\r\n                    property.unsubscribe();\r\n                }\r\n            }\r\n        }\r\n\r\n        if (original && typeof original === 'function') {\r\n            original.apply(this, arguments)\r\n        };\r\n    };\r\n\r\n}\r\nexport function isMobile() {\r\n    return window.innerWidth < 768\r\n}","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Observable, of } from 'rxjs';\r\nimport { debounce, debounceTime, map } from 'rxjs/operators';\r\nimport { BaseService } from '../services/base.service';\r\n\r\n@Pipe({\r\n  name: 'filter'\r\n})\r\nexport class filterPipe implements PipeTransform {\r\n\r\n  constructor(\r\n    private toastr: ToastrService,\r\n    private svc: BaseService\r\n  ) {\r\n  }\r\n\r\n  transform(items: any[], value: string): Observable<any> {\r\n    if (!items) return of([]);\r\n    if (!value) return of(items);\r\n    const data = {\r\n      \"search_field\": \"full_name\",\r\n      \"search_value\": value,\r\n      \"condition\": \"contains\",\r\n    }\r\n    return this.svc.post('AllUsers', data).pipe(\r\n      debounceTime(500),\r\n      map(res => {\r\n        if (res.status == 400) {\r\n          this.toastr.error(\"No contacts found\", \"Opps!\");\r\n          return [];\r\n        }\r\n        return res.users;\r\n      })\r\n    )\r\n  }\r\n}","import { Pipe, PipeTransform } from \"@angular/core\";\r\n\r\n@Pipe({\r\n    name: \"formatTime\"\r\n  })\r\n  export class FormatTimePipe implements PipeTransform {\r\n    transform(value: number): string {\r\n      const minutes: number = Math.floor(value / 60);\r\n      return (\r\n        (\"00\" + minutes).slice(-2) +\r\n        \":\" +\r\n        (\"00\" + Math.floor(value - minutes * 60)).slice(-2)\r\n      );\r\n    }\r\n  }","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n@Pipe({\r\n    name: 'safeUrl'\r\n})\r\nexport class SafeUrlPipe implements PipeTransform {\r\n    constructor(private domSanitizer: DomSanitizer) { }\r\n    transform(url) {\r\n        return this.domSanitizer.bypassSecurityTrustResourceUrl(url);\r\n    }\r\n}","import { HttpClient } from '@angular/common/http';\r\nimport { Observable, ReplaySubject, Subject } from 'rxjs';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class BaseService {\r\n\r\n  constructor(\r\n    protected http: HttpClient\r\n  ) { }\r\n\r\n  public userData = new ReplaySubject<any>();\r\n  userData$ = this.userData.asObservable();\r\n\r\n  public isLoading = new Subject<any>();\r\n  isLoadingResponse = this.isLoading.asObservable();\r\n\r\n  /**\r\n  * This method is used to Call API using Http GET method.\r\n  * @param URL \r\n  * @return obserables responsce\r\n  * @author  Muhammad Mukhtiar  <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  get(URL): Observable<any> {\r\n    return this.http.get(URL);\r\n  }\r\n\r\n  /**\r\n  * This method is use to add or update data using API \r\n  * @param formData \r\n  * @return obserables responsce\r\n  * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  save(URL, data = {}): Observable<any> {\r\n    return this.http.post(URL, data);\r\n  }\r\n\r\n  /**\r\n  * This method is used to Call API using Http Post method. \r\n  * @param URL \r\n  * @param URL \r\n  * @return obserables responsce\r\n  * @author  Mukhtiar Hussain <muhammad.mukhtiar@norgic.com>\r\n  **/\r\n  post(URL: string, payload: any = {}): Observable<any> {\r\n    return this.http.post(URL, payload);\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpEvent, HttpResponse, HttpInterceptor, HttpHandler, HttpRequest, HttpErrorResponse } from '@angular/common/http';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { Router } from '@angular/router';\r\nimport { StorageService } from './storage.service';\r\nimport { environment } from '../../../environments/environment';\r\nimport { BaseService } from './base.service';\r\n\r\n@Injectable()\r\nexport class HttpService implements HttpInterceptor {\r\n    private baseUrl = environment.apiBaseUrl;\r\n\r\n    constructor(\r\n        private router: Router,\r\n        private svc: BaseService\r\n    ) { }\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n        req = this.getModifiedReq(req);\r\n        return next.handle(req)\r\n            .pipe(\r\n                tap(event => {\r\n                    if (event instanceof HttpResponse) {\r\n                        if (event && event.body) {\r\n                            const serRes = event.body;\r\n                            this.svc.isLoading.next(false);\r\n                            if (serRes.code === 401) {\r\n                                StorageService.clearLocalStorge();\r\n                                this.showErrorMsg(serRes.message);\r\n                                this.router.navigate(['/login']);\r\n                            } else if (serRes.code === 407) {\r\n                                // StorageService.clearLocalStorge();\r\n                                this.showErrorMsg(serRes.message);\r\n                                // this.router.navigate(['/auth/login']);\r\n                            } else if (serRes.code === 200 || serRes.code === 201) {\r\n                            } else {\r\n                                this.showErrorMsg(serRes.message);\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                }),\r\n                catchError(errorRes => {\r\n                    this.svc.isLoading.next(false);\r\n                    console.log('this should print your error!', errorRes.error);\r\n                    if (errorRes instanceof HttpErrorResponse) {\r\n                        if (errorRes.status === 500) {\r\n                            // this.toastrService.danger('Opps!', \"Something went wrong\");\r\n                        } else {\r\n                            this.showErrorMsg(errorRes.message);\r\n                        }\r\n                    }\r\n                    return throwError(errorRes);\r\n                })\r\n            );\r\n    };\r\n\r\n    getModifiedReq(req: HttpRequest<any>): HttpRequest<any> {\r\n        req = req.clone({ url: this.baseUrl + req.url });\r\n        const formdata = JSON.stringify(req.body);\r\n        const auth_token = StorageService.getAuthToken();\r\n        if (auth_token) req = req.clone({ headers: req.headers.set('Authorization', 'Bearer ' + auth_token) });\r\n        req = req.clone({ headers: req.headers.set('Content-Type', 'application/json') });\r\n        req = req.clone({ body: formdata });\r\n        return req;\r\n    }\r\n\r\n    showErrorMsg(errorResponse) {\r\n        if (typeof errorResponse == 'string') {\r\n            // this.toastrService.danger('Opps!', errorResponse);\r\n        }\r\n\r\n    }\r\n}","import { Injectable, OnDestroy, Output } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { StorageService } from './storage.service';\r\ndeclare const MVDOTOK: any;\r\n\r\n@Injectable()\r\nexport class PubsubService implements OnDestroy {\r\n  @Output()\r\n  protected wsSubscription: Subscription;\r\n  public Client: any;\r\n\r\n  constructor() { }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.wsSubscription.unsubscribe();\r\n  }\r\n\r\n  public initConfigure(): void {\r\n    const user = StorageService.getUserData();\r\n    this.Client = new MVDOTOK.Client({\r\n      projectID: \"143LV8M8\",\r\n      secret: \"3d9686b635b15b5bc2d19800407609fa\",\r\n      host: `${user.messaging_server_map.protocol}://${user.messaging_server_map.host}:${user.messaging_server_map.port}`\r\n    });\r\n    this.Client.Register(user.ref_id.toString(), user.authorization_token.toString());\r\n  }\r\n\r\n  public sendMessage(message): void {\r\n    this.Client.SendMessage(message);\r\n  }\r\n\r\n  public subscribeToChat(groups): void {\r\n    groups.map(chanelObj => {\r\n      this.Client.Subscribe(chanelObj);\r\n    });\r\n  }\r\n\r\n\r\n  public unsubscribeToChat(groups): void {\r\n    this.Client.UnSubscribe(groups);\r\n  }\r\n\r\n  public Disconnect(): void {\r\n    this.Client.Disconnect();\r\n  }\r\n\r\n  readMessage(chatMessages) {\r\n    chatMessages.map(chat => {\r\n      this.Client.SendReceipt(chat);\r\n    });\r\n  }\r\n\r\n  readSingleMessage(chatMessages) {\r\n    this.Client.SendReceipt(chatMessages);\r\n  }\r\n\r\n}\r\n","export class StorageService {\r\n\r\n  static readonly STORAGE_KEY_AUTH_TOKEN = 'auth_token';\r\n  static readonly STORAGE_KEY_USER_NAME = 'username';\r\n  static readonly STORAGE_KEY_USER_DATA = 'user_data';\r\n\r\n  static clearLocalStorge() {\r\n    localStorage.clear();\r\n    sessionStorage.clear();\r\n    return;\r\n  }\r\n\r\n  static getAuthToken() {\r\n    return localStorage.getItem(StorageService.STORAGE_KEY_AUTH_TOKEN);\r\n  }\r\n\r\n  static setAuthToken(token) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_AUTH_TOKEN, token);\r\n  }\r\n\r\n  static removeAuthToken() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_AUTH_TOKEN);\r\n  }\r\n\r\n  static getAuthUsername() {\r\n    return localStorage.getItem(StorageService.STORAGE_KEY_USER_NAME);\r\n  }\r\n\r\n  static setAuthUsername(username) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_USER_NAME, username);\r\n  }\r\n\r\n  static removeAuthUsername() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_USER_NAME);\r\n  }\r\n\r\n  static setUserData(userData) {\r\n    localStorage.setItem(StorageService.STORAGE_KEY_USER_DATA, JSON.stringify(userData));\r\n  }\r\n\r\n  static getUserData() {\r\n    return JSON.parse(localStorage.getItem(StorageService.STORAGE_KEY_USER_DATA));\r\n  }\r\n\r\n  static removeUserData() {\r\n    localStorage.removeItem(StorageService.STORAGE_KEY_USER_DATA);\r\n  }\r\n\r\n}\r\n","import { Injectable, Output } from '@angular/core';\r\nimport { StorageService } from './storage.service';\r\ndeclare const CVDOTOK: any;\r\n\r\n@Injectable()\r\nexport class VdkM2MCallService {\r\n  @Output() public Client: any;\r\n  constructor() { }\r\n\r\n  public initConfigure(): void {\r\n    this.Client = new CVDOTOK.ManyToMany({\r\n      projectID: \"143LV8M8\",\r\n      secret: \"3d9686b635b15b5bc2d19800407609fa\",\r\n    });\r\n    this.Client.on(\"connected\", (res) => {\r\n      let user = StorageService.getUserData();\r\n      this.Client.Register(\r\n        user.ref_id.toString(),\r\n        user.authorization_token.toString()\r\n      );\r\n    });\r\n  }\r\n\r\n  groupCall(params): void {\r\n    this.Client.GroupCall(params);\r\n  }\r\n\r\n  joinGroupCall(params): void {\r\n    this.Client.JoinGroupCall(params);\r\n  }\r\n\r\n  leaveGroupCall(): void {\r\n    this.Client.LeaveGroupCall();\r\n  }\r\n\r\n  setCameraOn(): void {\r\n    this.Client.SetCameraOn();\r\n  }\r\n\r\n  setCameraOff(): void {\r\n    this.Client.SetCameraOff();\r\n  }\r\n\r\n  setMicMute(): void {\r\n    this.Client.SetMicMute();\r\n  }\r\n\r\n  setMicUnmute(): void {\r\n    this.Client.SetMicUnmute();\r\n  }\r\n\r\n  setParticipantVideo(participant, vidio) {\r\n    this.Client.SetParticipantVideo(participant, vidio);\r\n  }\r\n\r\n}\r\n","import { Injectable, Output } from '@angular/core';\r\nimport { StorageService } from './storage.service';\r\ndeclare const CVDOTOK: any;\r\n\r\n@Injectable()\r\nexport class VdkOne2OneCallService {\r\n  @Output() public Client: any;\r\n\r\n  constructor() { }\r\n  public initConfigure(): void {\r\n    const user = StorageService.getUserData();\r\n    this.Client = new CVDOTOK.Client({\r\n      projectID: \"143LV8M8\",\r\n      secret: \"3d9686b635b15b5bc2d19800407609fa\",\r\n      host: `${user.media_server_map.protocol}://${user.media_server_map.host}:${user.media_server_map.port}/${user.media_server_map.end_point}`\r\n    });\r\n    this.Client.on(\"connected\", (res) => {\r\n      let user = StorageService.getUserData();\r\n      this.Client.Register(\r\n        user.ref_id.toString(),\r\n        user.authorization_token.toString()\r\n      );\r\n    });\r\n  }\r\n\r\n  public Disconnect(): void {\r\n    // this.Client.Disconnect();\r\n  }\r\n\r\n  Call(params): void {\r\n    this.Client.Call(params);\r\n  }\r\n\r\n  audioCall(params): void {\r\n    this.Client.AudioCall(params);\r\n  }\r\n\r\n  acceptCall(local, remote): void {\r\n    this.Client.AcceptCall(local, remote);\r\n  }\r\n\r\n  rejectCall(from , val): void {\r\n    this.Client.RejectCall(from , val);\r\n  }\r\n\r\n  endCall(): void {\r\n    this.Client.EndCall();\r\n  }\r\n\r\n\r\n  cancelCall(): void {\r\n    this.Client.CancelCall();\r\n  }\r\n\r\n  setCameraOn(): void {\r\n    this.Client.SetCameraOn();\r\n  }\r\n\r\n  setCameraOff(): void {\r\n    this.Client.SetCameraOff();\r\n  }\r\n\r\n  setMicMute(): void {\r\n    this.Client.SetMicMute();\r\n  }\r\n\r\n  setMicUnmute(): void {\r\n    this.Client.SetMicUnmute();\r\n  }\r\n\r\n\r\n  groupCall(params): void {\r\n    this.Client.GroupCall(params);\r\n  }\r\n\r\n  joinGroupCall(params): void {\r\n    this.Client.JoinGroupCall(params);\r\n  }\r\n\r\n  leaveGroupCall(): void {\r\n    this.Client.LeaveGroupCall();\r\n  }\r\n\r\n  setParticipantVideo(participant, vidio) {\r\n    this.Client.SetParticipantVideo(participant, vidio);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\nimport { StorageService } from './services/storage.service';\r\nimport { AuthService } from './auth/auth.service';\r\nimport { AuthGuard } from './auth/auth-guard.service';\r\nimport { BaseService } from './services/base.service';\r\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { HttpService } from './services/http.service';\r\nimport { PubsubService } from './services/pubsub.service';\r\nimport { GetErrorsComponent } from './FormsHandler/get-errors.component';\r\nimport { MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\r\nimport { filterPipe } from './pipe/filter';\r\nimport { SafeUrlPipe } from './pipe/safeurl';\r\nimport { FormatTimePipe } from './pipe/formatTime';\r\nimport { VdkM2MCallService } from './services/vdk-m2m-call.service';\r\nimport { VdkOne2OneCallService } from './services/vdk-one2one-call.service';\r\n\r\nconst components = [\r\n  GetErrorsComponent,\r\n  filterPipe,\r\n  SafeUrlPipe,\r\n  FormatTimePipe\r\n]\r\n\r\n@NgModule({\r\n  imports: [\r\n    RouterModule,\r\n    CommonModule,\r\n  ],\r\n  declarations: [...components],\r\n  exports: [...components],\r\n  providers: [\r\n    StorageService,\r\n    AuthService,\r\n    AuthGuard,\r\n    BaseService,\r\n    PubsubService,\r\n    VdkOne2OneCallService,\r\n    VdkM2MCallService,\r\n    { provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: { hasBackdrop: false } },\r\n    { provide: HTTP_INTERCEPTORS, useClass: HttpService, multi: true },\r\n  ],\r\n})\r\nexport class SharedModule { }\r\n","\r\nimport { AbstractControl } from '@angular/forms';\r\n\r\n\r\n\r\nexport class ValidationService {\r\n\r\n    static specialCharValidator(control) {\r\n        if (control.value == null || control.value.match(/^[a-zA-Z0-9._]*$/)) {\r\n            return null;\r\n        } else {\r\n\r\n            return { 'invalidCharacters': true };\r\n        }\r\n    }\r\n\r\n    static uppercaseCharacterRule(amount: number): any {\r\n        return function validate(control): { [key: string]: any } {\r\n            const value: string = control.value;\r\n            if (value.length === 0) {\r\n                return undefined;\r\n            }\r\n            const pattern = /[^A-Z]+/g;\r\n            const stripped = value.replace(pattern, '');\r\n            if (stripped.length < amount) {\r\n                return { 'uppercaseCharacterRule': true };\r\n            }\r\n            return undefined;\r\n        };\r\n    }\r\n\r\n    static creditCardValidator(control) {\r\n        // Visa, MasterCard, American Express, Diners Club, Discover, JCB\r\n        if (control.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11})$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidCreditCard': true };\r\n        }\r\n    }\r\n\r\n    static emailValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const emailLowercase = control.value.toLowerCase();\r\n        if (control.value == null || emailLowercase.match(/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-zA-Z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidEmailAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static isEmptyInputValue(value: any): boolean {\r\n        // we don't check for string here so it also works with arrays\r\n        return value == null || value.length === 0;\r\n    }\r\n\r\n    static emptySpacesValidator(control) {\r\n        console.log('emptySpacesValidator', control, control.value);\r\n        if (control.value.match(/([^\\s])/)) {\r\n            return null;\r\n        } else {\r\n            return { 'emptySpaces': true };\r\n        }\r\n    }\r\n\r\n    static removeSpace(value: any): string {\r\n        return value.trim()\r\n    }\r\n\r\n    static englishWordsValidator(control) {\r\n        console.log('englishWordsValidator', control);\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const tempstring = ValidationService.removeSpace(control.value);\r\n        if (tempstring.match(/^[a-zA-Z]+( [\\&a-zA-Z]+)*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidCharacters': true };\r\n        }\r\n    }\r\n\r\n    static nameValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^(?:[a-zA-Z0-9\\s@,=%$#&_\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDCF\\uFDF0-\\uFDFF\\uFE70-\\uFEFF]|(?:\\uD802[\\uDE60-\\uDE9F]|\\uD83B[\\uDE00-\\uDEFF])){0,30}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNameCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n    static whiteSpaceValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n\r\n        if (control.value.match(/^[-a-zA-Z\\u0600-\\u06FF0-9-()]+(\\s+[-a-zA-Z\\u0600-\\u06FF0-9-()]+)*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidWhiteSpace': true };\r\n        }\r\n    }\r\n\r\n\r\n    static phoneValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^\\+?[0-9]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPhone': true };\r\n        }\r\n    }\r\n\r\n    static phoneUsernameEmailValidator(control) {\r\n        if (control.value == null) return;\r\n        let validEmail = true, validPhone = true, validUsername = true;\r\n        if (ValidationService.emailValidator(control) != null) {\r\n            validEmail = false;\r\n        }\r\n        if (!control.value.match(/^[a-zA-Z0-9]{5,17}$/)) {\r\n            validUsername = false;\r\n        }\r\n        if (!control.value.match(/^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/)) {\r\n            validPhone = false;\r\n        }\r\n        console.log('phoneUsernameEmailValidator', ValidationService.emailValidator(control), validEmail, validUsername, validPhone)\r\n        if (validEmail || validUsername || validPhone) return null;\r\n        return { 'invalidUsernameEmail': true };\r\n    }\r\n\r\n    static usernameValidator(control) {\r\n        // RFC 2822 compliant regex\r\n        if (control.value == null || control.value.match(/^[a-zA-Z0-9]+$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidUsernameCharacters': true };\r\n        }\r\n    }\r\n\r\n    static passwordValidator(control) {\r\n        // {8,100}           - Assert password is between 8 and 100 characters\r\n        // (?=.*[0-9])       - Assert a string has at least one number\r\n        if (control.value && !ValidationService.uppercaseCharacterRule(1)(control) && control.value.match(/^(?=.*[0-9])[a-zA-Z0-9!@#$%^&*]{6,100}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPassword': true };\r\n        }\r\n    }\r\n\r\n    static MatchPassword(control: AbstractControl, crud) {\r\n        if (control.value == null) return null;\r\n        return control.root.get('password').value != control.value ? { passworMismatch: true } : null;\r\n    }\r\n\r\n\r\n    static pinCodeValidator(control) {\r\n        if (control.value && control.value.match(/^[0-9]{4}$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidPinCode': true };\r\n        }\r\n    }\r\n\r\n\r\n    static trimData(data) {\r\n        if (data) {\r\n            for (const key in data) {\r\n                if (data[key] && typeof data[key] == \"string\") {\r\n                    data[key] = data[key].trim();\r\n                }\r\n            }\r\n            return data;\r\n        }\r\n    }\r\n\r\n\r\n    static checkInteger(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (parseFloat(control.value) == 0 || (parseFloat(control.value) || parseInt(control.value)) && !isNaN(control.value)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumber': true };\r\n        }\r\n    }\r\n\r\n\r\n    static alphnumericValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (ValidationService.whiteSpaceValidator(control.value)) return;\r\n        // if (control.value.match(/^[^!@$%^&*_+#\\\\/<>?:;|=.,0-9]{1,500}$/)) {\r\n        if (control.value.match(/^[a-zA-Z0-9-,]+(\\s{0,1}[a-zA-Z-, ])*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n    static stringvalidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^[a-zA-Z0-9-,]+(\\s{0,1}[a-zA-Z-, ])*$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n    static disallowspecial(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^[A-Za-z0-9 ]+$/)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidInputCharacters': true };\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static alphValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (control.value.match(/^\\+?[A-Za-z]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidString': true };\r\n        }\r\n    }\r\n\r\n    static numericValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        if (ValidationService.whiteSpaceValidator(control.value)) return;\r\n        const value = control.value.toString()\r\n        if (value.match(/^\\+?[0-9]+$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumeric': true };\r\n        }\r\n    }\r\n\r\n    static floatNumberValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^[+-]?\\d+(\\.\\d+)?$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidNumeric': true };\r\n        }\r\n    }\r\n\r\n\r\n    static mackAddressValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidMackAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static gatewayAddressValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidMackAddress': true };\r\n        }\r\n    }\r\n\r\n\r\n    static ipValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))\\.(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))$/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidIp': true };\r\n        }\r\n    }\r\n\r\n\r\n    static domainNameValidator(control) {\r\n        if (ValidationService.isEmptyInputValue(control.value)) return null;\r\n        const value = control.value.toString()\r\n        if (value.match(/^(?=^.{1,254}$)(^(?:(?!\\d+\\.)[a-zA-Z0-9_\\-]{1,63}\\.?)+(?:[a-zA-Z]{2,})$)/g)) {\r\n            return null;\r\n        } else {\r\n            return { 'invalidDomainName': true };\r\n        }\r\n    }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  apiBaseUrl : 'https://s-tenant.vdotok.dev/API/v0/'\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}